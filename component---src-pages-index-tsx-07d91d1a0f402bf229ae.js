"use strict";(self.webpackChunkMergist=self.webpackChunkMergist||[]).push([[691],{4581:function(e,t,n){n.r(t),n.d(t,{default:function(){return xe}});var r=n(946),a=n(8215),i=n.n(a),o=n(6687),l=n(3097),c=n(9063),s=n(8121),u=n(4332),f=n(1303);function d(e){return o.createElement("label",{className:"cursor-pointer "+e.className},e.children,o.createElement("input",{className:"hidden",type:"file",accept:"application/pdf",onChange:function(t){(0,c.$K)(t);var n=t.target.files;n&&n.length>0&&e.onFilesAdded(n)},multiple:!0}))}function m(e){return o.createElement(d,{className:"flex flex-col flex-1",onFilesAdded:e.onFilesAdded},o.createElement("div",{className:"flex flex-col justify-center flex-1 m-8 p-8 gap-8 text-center z-20 bg-base-100 hover:bg-base-200 border-2 border-dashed rounded-lg transition-color duration-200"},o.createElement(u.G,{icon:f.b7h,className:"fa-3x"}),o.createElement("p",{className:"flex-grow-0"},"Drag and drop PDF files here, or click to select files")))}function v(e){var t=(0,o.useState)(!1),n=t[0],r=t[1],a=(0,o.useRef)(0);function i(e){e.preventDefault(),e.stopPropagation()}var l=(0,o.useCallback)((function(e){i(e)}),[]),c=(0,o.useCallback)((function(e){i(e),a.current++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&r(!0)}),[]),s=(0,o.useCallback)((function(e){i(e),a.current--,a.current>0||r(!1)}),[]),u=(0,o.useCallback)((function(t){i(t),r(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0&&(a.current=0,e.onFilesAdded(t.dataTransfer.files),t.dataTransfer.clearData())}),[e.onFilesAdded]);return(0,o.useEffect)((function(){return window.addEventListener("dragenter",c),window.addEventListener("dragleave",s),window.addEventListener("dragover",l),window.addEventListener("drop",u),function(){window.removeEventListener("dragenter",c),window.removeEventListener("dragleave",s),window.removeEventListener("dragover",l),window.removeEventListener("drop",u)}})),o.createElement("div",{className:"fixed inset-0 flex flex-col justify-center items-center p-16 bg-base-100/50 z-10 "+(n?"":"hidden")})}d.defaultProps={className:""};var p=n(6944),b=n(2404),g=n(333);function E(){var e=(0,o.useRef)(!1);return(0,g.L)((function(){return e.current=!0,function(){e.current=!1}}),[]),e}var y=n(9253),h=n(1240),x=n(7732),w=function(e){var t=e.children,n=e.initial,r=e.isPresent,a=e.onExitComplete,i=e.custom,l=e.presenceAffectsLayout,c=(0,h.h)(N),s=(0,x.M)(),u=(0,o.useMemo)((function(){return{id:s,initial:n,isPresent:r,custom:i,onExitComplete:function(e){var t,n;c.set(e,!0);try{for(var r=(0,p.XA)(c.values()),i=r.next();!i.done;i=r.next()){if(!i.value)return}}catch(o){t={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}null==a||a()},register:function(e){return c.set(e,!1),function(){return c.delete(e)}}}}),l?void 0:[r]);return(0,o.useMemo)((function(){c.forEach((function(e,t){return c.set(t,!1)}))}),[r]),o.useEffect((function(){!r&&!c.size&&(null==a||a())}),[r]),o.createElement(y.O.Provider,{value:u},t)};function N(){return new Map}var k=n(8310),C=n(4411),R=function(e){return e.key||""};var A,F=function(e){var t=e.children,n=e.custom,r=e.initial,a=void 0===r||r,i=e.onExitComplete,l=e.exitBeforeEnter,c=e.presenceAffectsLayout,s=void 0===c||c,u=(0,p.CR)(function(){var e=E(),t=(0,p.CR)((0,o.useState)(0),2),n=t[0],r=t[1],a=(0,o.useCallback)((function(){e.current&&r(n+1)}),[n]);return[(0,o.useCallback)((function(){return b.ZP.postRender(a)}),[a]),n]}(),1),f=u[0],d=(0,o.useContext)(k.p).forceRender;d&&(f=d);var m=E(),v=function(e){var t=[];return o.Children.forEach(e,(function(e){(0,o.isValidElement)(e)&&t.push(e)})),t}(t),y=v,h=new Set,x=(0,o.useRef)(y),N=(0,o.useRef)(new Map).current,A=(0,o.useRef)(!0);if((0,g.L)((function(){A.current=!1,function(e,t){e.forEach((function(e){var n=R(e);t.set(n,e)}))}(v,N),x.current=y})),(0,C.z)((function(){A.current=!0,N.clear(),h.clear()})),A.current)return o.createElement(o.Fragment,null,y.map((function(e){return o.createElement(w,{key:R(e),isPresent:!0,initial:!!a&&void 0,presenceAffectsLayout:s},e)})));y=(0,p.ev)([],(0,p.CR)(y),!1);for(var F=x.current.map(R),O=v.map(R),S=F.length,M=0;M<S;M++){var P=F[M];-1===O.indexOf(P)&&h.add(P)}return l&&h.size&&(y=[]),h.forEach((function(e){if(-1===O.indexOf(e)){var t=N.get(e);if(t){var r=F.indexOf(e);y.splice(r,0,o.createElement(w,{key:R(t),isPresent:!1,onExitComplete:function(){N.delete(e),h.delete(e);var t=x.current.findIndex((function(t){return t.key===e}));if(x.current.splice(t,1),!h.size){if(x.current=v,!1===m.current)return;f(),i&&i()}},custom:n,presenceAffectsLayout:s},t))}}})),y=y.map((function(e){var t=e.key;return h.has(t)?e:o.createElement(w,{key:R(e),isPresent:!0,presenceAffectsLayout:s},e)})),o.createElement(o.Fragment,null,h.size?y:y.map((function(e){return(0,o.cloneElement)(e)})))},O=n(3741),S=n(8002),M=((A={})[S.X.SUCCESS]={class:"alert-success",icon:f.chG},A[S.X.WARNING]={class:"alert-warning",icon:f.ik8},A[S.X.ERROR]={class:"alert-error",icon:f.xHz},A);function P(e){var t=e.statusMsg.getSeverity,n=(0,o.useState)(!0),r=n[0],a=n[1];return(0,o.useEffect)((function(){var e=setTimeout((function(){a(!1)}),4e3);return function(){clearTimeout(e)}}),[4e3]),o.createElement(F,null,r&&o.createElement(O.E.div,{layout:!0,className:"alert "+M[t].class+" shadow-md",key:e.statusMsg.getId,initial:{opacity:0,scaleY:0},animate:{opacity:1,scaleY:1},exit:{opacity:0,scaleY:0}},o.createElement("div",null,o.createElement(u.G,{icon:M[t].icon,className:"mr-2 fa-lg"}),o.createElement("span",null,e.statusMsg.getMsg))))}function I(e){return o.createElement("div",{className:"w-full h-1"},o.createElement(O.E.div,{role:"progressbar",className:"h-full bg-primary-content rounded-full",initial:{width:0},animate:{width:e.progress},transition:{type:"inertia",power:1,timeConstant:1e3,velocity:100}}))}function j(e){return o.createElement("button",{className:"btn btn-block gap-2 "+e.className,disabled:e.disabled,onClick:e.onClick},e.children)}function B(e){return o.createElement("a",{href:e.downloadUrl,target:"_blank",rel:"noopener noreferrer",download:"merged.pdf",className:"w-full"},o.createElement(j,{className:"btn-accent"},o.createElement(u.G,{icon:f.ISu}),"Download"))}function D(e){var t=e.progress>=1,n=(100*e.progress).toFixed(0)+"%";return o.createElement("div",{className:"flex flex-col gap-2 w-full text-center"},o.createElement(j,{className:"btn-primary flex flex-col justify-between p-0 pt-4 border-0 overflow-hidden "+(t?"loading":""),disabled:!0},!t&&n,o.createElement(I,{progress:n})))}function T(e){var t=o.createElement(j,{className:"btn-primary",disabled:e.disabled,onClick:e.onClick},o.createElement(u.G,{icon:f.Krp}),"Merge Files");return o.createElement("div",{className:"flex flex-col gap-2 w-full text-center"},e.disabled&&o.createElement("div",{className:"tooltip tooltip-warning","data-tip":"Please add more files to merge"},t)||t)}function G(e){return o.createElement(d,{className:"btn btn-primary gap-2",onFilesAdded:e.onClick},o.createElement(u.G,{icon:f.b7h}),"Add File")}function L(e){return o.createElement("button",{className:"btn btn-primary gap-2",onClick:e.onClick},o.createElement(u.G,{icon:f.$aW}),"Remove All")}function z(e){return e.downloadUrl?o.createElement(B,{downloadUrl:e.downloadUrl}):e.progress>0?o.createElement(D,{progress:e.progress}):o.createElement(T,{onClick:e.onClick,disabled:e.numOfFiles<2})}j.defaultProps={className:"",disabled:!1,onClick:function(){}};var Z=n(7083),U=n(5999),$=n(702),Y=(0,o.createContext)(null),q=n(4566),X=n(7029);var _=(0,o.forwardRef)((function(e,t){var n=e.children,r=e.as,a=void 0===r?"ul":r,i=e.axis,l=void 0===i?"y":i,c=e.onReorder,s=e.values,u=(0,p._T)(e,["children","as","axis","onReorder","values"]),f=(0,h.h)((function(){return(0,O.E)(a)})),d=[],m=(0,o.useRef)(!1);(0,$.k)(Boolean(s),"Reorder.Group must be provided a values prop");var v={axis:l,registerItem:function(e,t){t&&-1===d.findIndex((function(t){return e===t.value}))&&(d.push({value:e,layout:t[l]}),d.sort(W))},updateOrder:function(e,t,n){if(!m.current){var r=function(e,t,n,r){if(!r)return e;var a=e.findIndex((function(e){return e.value===t}));if(-1===a)return e;var i=r>0?1:-1,o=e[a+i];if(!o)return e;var l=e[a],c=o.layout,s=(0,q.C)(c.min,c.max,.5);return 1===i&&l.layout.max+n>s||-1===i&&l.layout.min+n<s?(0,X.uo)(e,a,a+i):e}(d,e,t,n);d!==r&&(m.current=!0,c(r.map(K).filter((function(e){return-1!==s.indexOf(e)}))))}}};return(0,o.useEffect)((function(){m.current=!1})),o.createElement(f,(0,p.pi)({},u,{ref:t}),o.createElement(Y.Provider,{value:v},n))}));function K(e){return e.value}function W(e,t){return e.layout.min-t.layout.min}var H=n(4495),V=n(26);function J(e){var t=(0,h.h)((function(){return(0,H.B)(e)}));if((0,o.useContext)(V._).isStatic){var n=(0,p.CR)((0,o.useState)(e),2)[1];(0,o.useEffect)((function(){return t.onChange(n)}),[])}return t}var Q=n(6540),ee=function(e){return function(e){return"object"==typeof e&&e.mix}(e)?e.mix:void 0};function te(e,t){var n=J(t()),r=function(){return n.set(t())};return r(),function(e,t){(0,o.useEffect)((function(){var n=e.map((function(e){return e.onChange(t)}));return function(){return n.forEach((function(e){return e()}))}}))}(e,(function(){return b.ZP.update(r,!1,!0)})),n}function ne(e,t,n,r){var a="function"==typeof t?t:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=!Array.isArray(e[0]),r=n?0:-1,a=e[0+r],i=e[1+r],o=e[2+r],l=e[3+r],c=(0,Q.s)(i,o,(0,p.pi)({mixer:ee(o[0])},l));return n?c(a):c}(t,n,r);return Array.isArray(e)?re(e,a):re([e],(function(e){var t=(0,p.CR)(e,1)[0];return a(t)}))}function re(e,t){var n=(0,h.h)((function(){return[]}));return te(e,(function(){n.length=0;for(var r=e.length,a=0;a<r;a++)n[a]=e[a].get();return t(n)}))}var ae=n(2569);function ie(e,t){return void 0===t&&(t=0),(0,ae.i)(e)?e:J(t)}var oe={Group:_,Item:(0,o.forwardRef)((function(e,t){var n=e.children,r=e.style,a=e.value,i=e.as,l=void 0===i?"li":i,c=e.onDrag,s=e.layout,u=void 0===s||s,f=(0,p._T)(e,["children","style","value","as","onDrag","layout"]),d=(0,h.h)((function(){return(0,O.E)(l)})),m=(0,o.useContext)(Y),v={x:ie(null==r?void 0:r.x),y:ie(null==r?void 0:r.y)},b=ne([v.x,v.y],(function(e){var t=(0,p.CR)(e,2),n=t[0],r=t[1];return n||r?1:"unset"})),g=(0,o.useRef)(null);(0,$.k)(Boolean(m),"Reorder.Item must be a child of Reorder.Group");var E=m,y=E.axis,x=E.registerItem,w=E.updateOrder;return(0,o.useEffect)((function(){x(a,g.current)}),[m]),o.createElement(d,(0,p.pi)({drag:y},f,{dragSnapToOrigin:!0,style:(0,p.pi)((0,p.pi)({},r),{x:v.x,y:v.y,zIndex:b}),layout:u,onDrag:function(e,t){var n=t.velocity;n[y]&&w(a,v[y].get(),n[y]),null==c||c(e,t)},onLayoutMeasure:function(e){g.current=e},ref:t}),n)}))},le=n(4650);function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){(0,le.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ue=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],fe=["B","kiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],de=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],me=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],ve=function(e,t,n){var r=e;return"string"==typeof t||Array.isArray(t)?r=e.toLocaleString(t,n):!0!==t&&void 0===n||(r=e.toLocaleString(void 0,n)),r};function pe(e,t){if(!Number.isFinite(e))throw new TypeError("Expected a finite number, got ".concat(typeof e,": ").concat(e));var n=(t=se({bits:!1,binary:!1},t)).bits?t.binary?me:de:t.binary?fe:ue;if(t.signed&&0===e)return" 0 ".concat(n[0]);var r,a=e<0,i=a?"-":t.signed?"+":"";if(a&&(e=-e),void 0!==t.minimumFractionDigits&&(r={minimumFractionDigits:t.minimumFractionDigits}),void 0!==t.maximumFractionDigits&&(r=se({maximumFractionDigits:t.maximumFractionDigits},r)),e<1)return i+ve(e,t.locale,r)+" "+n[0];var o=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),n.length-1);return e/=Math.pow(t.binary?1024:1e3,o),r||(e=e.toPrecision(3)),i+ve(Number(e),t.locale,r)+" "+n[o]}function be(e){return o.createElement(oe.Group,{axis:"y",values:e.fileIds,onReorder:e.onReorder,className:"flex flex-col px-6 py-7 gap-5 bg-base-300 shadow-inner overflow-hidden"},o.createElement(F,null,e.fileIds.map((function(t){return o.createElement(ge,{key:t,id:t,name:e.files[t].getName,size:e.files[t].getSize,onRemove:e.onFileRemoved,disabled:e.disabled})}))))}function ge(e){var t="bg-base-100 shadow-md flex flex-row justify-between items-center p-2 gap-4 rounded-lg cursor-pointer hover:bg-base-200 "+(e.disabled?"opacity-40":""),n=Object.assign({initial:{scale:0},animate:{scale:1},exit:{scale:0}},c.b$);return o.createElement(oe.Item,Object.assign({key:e.id,value:e.id,className:t},n),o.createElement("button",{className:"btn btn-square btn-ghost"},o.createElement(u.G,{icon:f.g$q,className:"fa-lg"})),o.createElement("p",{className:"font-bold overflow-hidden whitespace-nowrap text-ellipsis"},e.name),o.createElement("div",{className:"flex-1"}),o.createElement("p",{className:"whitespace-nowrap"},"(",pe(e.size),")"),o.createElement("div",{className:"card-actions justify-end"},o.createElement("button",{className:"btn btn-square btn-ghost",onClick:function(){return e.onRemove(e.id)}},o.createElement(u.G,{icon:f.g82,className:"fa-lg"}))))}function Ee(e){return o.createElement("div",{tabIndex:0,className:"collapse"},o.createElement("div",{className:"flex flex-row justify-between items-center p-6 collapse-title text-lg font-medium"},o.createElement("h5",{className:"pl-4"},e.fileIds.length," file",1!==e.fileIds.length&&"s"," added (",pe(Object.values(e.files).reduce((function(e,t){return e+t.getSize}),0)),")"),o.createElement("div",{className:"flex flex-row gap-2"},o.createElement(G,{onClick:e.onFileAdded}),o.createElement(L,{onClick:e.onAllFilesRemoved}))),o.createElement("div",{style:{pointerEvents:e.disabled?"none":"initial"},onClick:e.disabled&&c.$K||void 0,className:"overflow-hidden"},o.createElement(be,{fileIds:e.fileIds,files:e.files,onReorder:e.onReorder,onFileRemoved:e.onFileRemoved,disabled:e.disabled})))}function ye(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return he(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xe(){var e=(0,o.useState)([]),t=e[0],n=e[1],a=(0,o.useState)({}),u=a[0],f=a[1],d=(0,o.useState)([]),p=d[0],b=d[1],g=(0,o.useState)(""),E=g[0],y=g[1],h=(0,o.useState)(0),x=h[0],w=h[1],N=(0,c.Zq)(l.Z),k=new c.Rq(N.shortTitle,N.siteUrl);function C(e,t){void 0===t&&(t=null),k.removeMergedFile(E),t&&f(t),n(e),w(0),y("")}var R=(0,o.useCallback)((function(e){var n=k.filterInvalidFiles(u,Array.from(e)),r=n[0],a=n[1];if(r.length>0){for(var i,o=u,l=[],c=ye(r);!(i=c()).done;){var s=i.value;l.push(s.id),o[s.id]=s}C(t.concat(l),o)}a.length>0&&b(a)}),[t,u]);function A(){return(A=(0,r.Z)(i().mark((function e(){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.createMergedFile(u,t,w);case 2:n=e.sent,r=n[0],a=n[1],""===r&&y(""),y(r),b(a),w(0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o.createElement(s.Xg,{metadata:N},o.createElement(U.Z,{title:N.shortTitle},N.description),o.createElement(s.or,null,o.createElement(v,{onFilesAdded:R}),o.createElement(s.$0,{visible:p.length>0,className:"gap-5"},p.map((function(e){return o.createElement(P,{key:e.getId,statusMsg:e})}))),o.createElement("div",{tabIndex:0,className:"collapse collapse-open flex-1 bg-base-100 border border-base-300 rounded-box"},o.createElement(s.$0,{visible:0===t.length,className:"flex-1"},o.createElement(m,{onFilesAdded:R})),o.createElement(s.$0,{visible:t.length>0},o.createElement(Ee,{fileIds:t,files:u,onReorder:function(e){C(e)},onFileAdded:R,onFileRemoved:function(e){var n=u,r=t.filter((function(t){return t!==e}));delete n[e],C(r,n)},onAllFilesRemoved:function(){C([],{})},disabled:x>0}))),o.createElement(s.$0,{visible:t.length>0},o.createElement("div",{className:"flex flex-row justify-center gap-8"},o.createElement(z,{numOfFiles:t.length,progress:x,downloadUrl:E,onClick:function(){return A.apply(this,arguments)}})))),o.createElement(Z.Z,{author:N.author,githubUrl:N.githubUrl,homepageDomain:N.homepageDomain}))}}}]);
//# sourceMappingURL=component---src-pages-index-tsx-07d91d1a0f402bf229ae.js.map