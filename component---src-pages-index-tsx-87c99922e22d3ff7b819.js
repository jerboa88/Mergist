"use strict";(self.webpackChunkMergist=self.webpackChunkMergist||[]).push([[245],{1853:function(e,t,n){n.r(t),n.d(t,{default:function(){return X}});var r=n(1688),i=n(2798),a=n(3163),l=n(1086),s=n(6158),o=n(847);function c(e){return r.createElement("label",{className:"cursor-pointer "+e.className},r.createElement("input",{className:"hidden",type:"file",accept:"application/pdf",onChange:function(t){(0,a.Al)(t);const n=t.target.files;n&&n.length>0&&e.onFilesAdded(n)},multiple:!0}),e.children)}function d(e){return r.createElement(c,{className:"flex-col flex-1",onFilesAdded:e.onFilesAdded},r.createElement("div",{className:"flex-col justify-center flex-1 m-8 p-8 gap-8 text-center z-20 bg-base-100 border-2 border-dashed rounded-lg hover:bg-base-200"},r.createElement(o.I,{icon:s.OXM,tw:"fa-3x"}),r.createElement("p",{className:"flex-grow-0"},"Drag and drop PDF files here, or click to select files")))}function u(e){const{0:t,1:n}=(0,r.useState)(!1),i=(0,r.useRef)(0),l=(0,r.useCallback)((e=>{(0,a.Al)(e)}),[]),s=(0,r.useCallback)((e=>{(0,a.Al)(e),i.current++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&n(!0)}),[]),o=(0,r.useCallback)((e=>{(0,a.Al)(e),i.current--,i.current>0||n(!1)}),[]),c=(0,r.useCallback)((t=>{(0,a.Al)(t),n(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0&&(i.current=0,e.onFilesAdded(t.dataTransfer.files),t.dataTransfer.clearData())}),[e.onFilesAdded]);return(0,r.useEffect)((()=>(window.addEventListener("dragenter",s),window.addEventListener("dragleave",o),window.addEventListener("dragover",l),window.addEventListener("drop",c),()=>{window.removeEventListener("dragenter",s),window.removeEventListener("dragleave",o),window.removeEventListener("dragover",l),window.removeEventListener("drop",c)}))),r.createElement("div",{className:"fixed inset-0 flex-col justify-center items-center p-16 bg-base-100/50 z-10 "+(t?"":"hidden")})}c.defaultProps={className:""};var m=n(2038),f=n(4712),g=n(5595);const b={[g.P.SUCCESS]:{class:"alert-success",icon:s.Dnq},[g.P.WARNING]:{class:"alert-warning",icon:s.JAe},[g.P.ERROR]:{class:"alert-error",icon:s.lEd}};function v(e){const t=e.statusMsg.getSeverity,{0:n,1:i}=(0,r.useState)(!0),l={initial:"hidden",animate:"visible",exit:"hidden",variants:{visible:{opacity:1,scaleY:1},hidden:{opacity:0,scaleY:0}},...(0,a.xl)()};return(0,r.useEffect)((()=>{const e=setTimeout((()=>{i(!1)}),5e3);return()=>{clearTimeout(e)}}),[5e3]),r.createElement(m.N,null,n&&r.createElement(f.P.div,Object.assign({layout:!0,className:"alert shadow "+b[t].class,key:e.statusMsg.getId},l),r.createElement("div",null,r.createElement(o.I,{icon:b[t].icon,tw:"mr-2 fa-lg"}),r.createElement("span",null,e.statusMsg.getMsg))))}var p=n(9788),E=n(4305),h=n(9594),x=n(6757);const y=(0,r.createContext)(null);var w=n(4838),A=n(6195),N=n(9558);const F=(0,r.forwardRef)((function({children:e,as:t="ul",axis:n="y",onReorder:i,values:a,...l},s){const o=(0,w.M)((()=>(0,f.P)(t))),c=[],d=(0,r.useRef)(!1);(0,x.V)(Boolean(a),"Reorder.Group must be provided a values prop");const u={axis:n,registerItem:(e,t)=>{const r=c.findIndex((t=>e===t.value));-1!==r?c[r].layout=t[n]:c.push({value:e,layout:t[n]}),c.sort(R)},updateOrder:(e,t,n)=>{if(d.current)return;const r=function(e,t,n,r){if(!r)return e;const i=e.findIndex((e=>e.value===t));if(-1===i)return e;const a=r>0?1:-1,l=e[i+a];if(!l)return e;const s=e[i],o=l.layout,c=(0,N.j)(o.min,o.max,.5);return 1===a&&s.layout.max+n>c||-1===a&&s.layout.min+n<c?(0,A.Pe)(e,i,i+a):e}(c,e,t,n);c!==r&&(d.current=!0,i(r.map(M).filter((e=>-1!==a.indexOf(e)))))}};return(0,r.useEffect)((()=>{d.current=!1})),r.createElement(o,{...l,ref:s,ignoreStrict:!0},r.createElement(y.Provider,{value:u},e))}));function M(e){return e.value}function R(e,t){return e.layout.min-t.layout.min}var I=n(3772),S=n(1079);function k(e){const t=(0,w.M)((()=>(0,I.OQ)(e))),{isStatic:n}=(0,r.useContext)(S.Q);if(n){const[,n]=(0,r.useState)(e);(0,r.useEffect)((()=>t.on("change",n)),[])}return t}var B=n(2541);const C=e=>(e=>e&&"object"==typeof e&&e.mix)(e)?e.mix:void 0;var T=n(9761),D=n(3214);function P(e,t){const n=k(t()),r=()=>n.set(t());return r(),(0,T.E)((()=>{const t=()=>D.Gt.update(r,!1,!0),n=e.map((e=>e.on("change",t)));return()=>{n.forEach((e=>e())),(0,D.WG)(r)}})),n}function G(e,t,n,r){if("function"==typeof e)return function(e){I.bt.current=[],e();const t=P(I.bt.current,e);return I.bt.current=void 0,t}(e);const i="function"==typeof t?t:function(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],i=e[1+n],a=e[2+n],l=e[3+n],s=(0,B.G)(i,a,{mixer:C(a[0]),...l});return t?s(r):s}(t,n,r);return Array.isArray(e)?j(e,i):j([e],(([e])=>i(e)))}function j(e,t){const n=(0,w.M)((()=>[]));return P(e,(()=>{n.length=0;const r=e.length;for(let t=0;t<r;t++)n[t]=e[t].get();return t(n)}))}var L=n(6509);function O(e,t=0){return(0,L.S)(e)?e:k(t)}const z={Group:F,Item:(0,r.forwardRef)((function({children:e,style:t={},value:n,as:i="li",onDrag:a,layout:l=!0,...s},o){const c=(0,w.M)((()=>(0,f.P)(i))),d=(0,r.useContext)(y),u={x:O(t.x),y:O(t.y)},m=G([u.x,u.y],(([e,t])=>e||t?1:"unset"));(0,x.V)(Boolean(d),"Reorder.Item must be a child of Reorder.Group");const{axis:g,registerItem:b,updateOrder:v}=d;return r.createElement(c,{drag:g,...s,dragSnapToOrigin:!0,style:{...t,x:u.x,y:u.y,zIndex:m},layout:l,onDrag:(e,t)=>{const{velocity:r}=t;r[g]&&v(n,u[g].get(),r[g]),a&&a(e,t)},onLayoutMeasure:e=>b(n,e),ref:o,ignoreStrict:!0},e)}))},Y=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],U=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],Z=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],$=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],K=(e,t,n)=>{let r=e;return"string"==typeof t||Array.isArray(t)?r=e.toLocaleString(t,n):!0!==t&&void 0===n||(r=e.toLocaleString(void 0,n)),r};function J(e,t){if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);const n=(t={bits:!1,binary:!1,space:!0,...t}).bits?t.binary?$:Z:t.binary?U:Y,r=t.space?" ":"";if(t.signed&&0===e)return` 0${r}${n[0]}`;const i=e<0,a=i?"-":t.signed?"+":"";let l;if(i&&(e=-e),void 0!==t.minimumFractionDigits&&(l={minimumFractionDigits:t.minimumFractionDigits}),void 0!==t.maximumFractionDigits&&(l={maximumFractionDigits:t.maximumFractionDigits,...l}),e<1){return a+K(e,t.locale,l)+r+n[0]}const s=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),n.length-1);e/=(t.binary?1024:1e3)**s,l||(e=e.toPrecision(3));return a+K(Number(e),t.locale,l)+r+n[s]}function Q(e){const t="bg-base-100 shadow-md flex-row justify-between p-2 gap-4 rounded-lg cursor-pointer overflow-hidden hover:bg-base-200 "+(e.disabled?"opacity-40":""),n={initial:{scale:0},animate:{scale:1},exit:{scale:0},...(0,a.xl)()};return r.createElement(z.Item,Object.assign({key:e.id,value:e.id,className:t},n),r.createElement("div",{className:"flex-row items-center overflow-hidden gap-0 sm:gap-2"},r.createElement(p.K0,{icon:s.S9g}),r.createElement("p",{className:"font-bold overflow-hidden whitespace-nowrap text-ellipsis"},e.name)),r.createElement("div",{className:"flex-row flex-none items-center overflow-hidden gap-0 sm:gap-2"},r.createElement("p",{className:"whitespace-nowrap"},"(",J(e.size,{maximumFractionDigits:0}),")"),r.createElement("div",{className:"card-actions justify-end"},r.createElement(p.K0,{icon:s.Jyw,onClick:()=>e.onRemove(e.id)}))))}function V(e){return r.createElement(z.Group,{axis:"y",values:e.fileIds,onReorder:e.onReorder,className:"flex-col px-6 py-7 gap-5 bg-base-300 shadow-inner overflow-hidden"},r.createElement(m.N,null,e.fileIds.map((t=>r.createElement(Q,{key:t,id:t,name:e.files[t].getName,size:e.files[t].getSize,onRemove:e.onFileRemoved,disabled:e.disabled})))))}function W(e){return r.createElement("div",{tabIndex:0,className:"collapse"},r.createElement("div",{className:"flex-col sm:flex-row justify-between items-center p-6 sm:pl-10 gap-4 collapse-title text-lg font-medium"},r.createElement("h2",null,e.fileIds.length," file",1!==e.fileIds.length&&"s"," added (",J(Object.values(e.files).reduce(((e,t)=>e+t.getSize),0)),")"),r.createElement("div",{className:"flex-row gap-2 flex-1 sm:flex-none"},r.createElement(c,{onFilesAdded:e.onFileAdded},r.createElement(p.jn,{icon:s.OXM,fake:!0},"Add File")),r.createElement(p.jn,{icon:s.yLS,onClick:e.onAllFilesRemoved},"Remove All"))),r.createElement("div",{style:{pointerEvents:e.disabled?"none":"initial"},onClick:e.disabled&&a.Al||void 0,className:"overflow-hidden"},r.createElement(V,{fileIds:e.fileIds,files:e.files,onReorder:e.onReorder,onFileRemoved:e.onFileRemoved,disabled:e.disabled})))}function X(){const{0:e,1:t}=(0,r.useState)([]),{0:n,1:s}=(0,r.useState)({}),{0:o,1:c}=(0,r.useState)([]),{0:m,1:f}=(0,r.useState)(""),{0:g,1:b}=(0,r.useState)(0),x=(0,a._G)(i.A),y=new a.ag(x.shortTitle,x.siteUrl);function w(e,n){void 0===n&&(n=null),y.removeMergedFile(m),n&&s(n),t(e),b(0),f("")}const A=(0,r.useCallback)((t=>{const[r,i]=y.filterInvalidFiles(n,Array.from(t));if(r.length>0){const t=n,i=[];for(const e of r)i.push(e.id),t[e.id]=e;w(e.concat(i),t)}i.length>0&&c(i)}),[e,n]);return r.createElement(l.Mx,{metadata:x},r.createElement(h.A,{title:x.shortTitle},x.description),r.createElement(l.gZ,null,r.createElement(u,{onFilesAdded:A}),r.createElement(l.wn,{visible:o.length>0,className:"gap-5"},o.map((e=>r.createElement(v,{key:e.getId,statusMsg:e})))),r.createElement("div",{tabIndex:0,className:"collapse collapse-open flex-1 bg-base-100 border border-base-300 rounded-none sm:rounded-box"},r.createElement(l.wn,{visible:0===e.length,className:"flex-1"},r.createElement(d,{onFilesAdded:A})),r.createElement(l.wn,{visible:e.length>0},r.createElement(W,{fileIds:e,files:n,onReorder:function(e){w(e)},onFileAdded:A,onFileRemoved:function(t){const r=n,i=e.filter((e=>e!==t));delete r[t],w(i,r)},onAllFilesRemoved:function(){w([],{})},disabled:g>0}))),r.createElement(l.wn,{visible:e.length>0,className:"px-6 sm:px-0"},r.createElement(p.rA,{numOfFiles:e.length,progress:g,downloadUrl:m,onClick:async function(){const[t,r]=await y.createMergedFile(n,e,b);""===t&&f(""),f(t),c(r),b(0)}}))),r.createElement(E.A,{author:x.author,githubUrl:x.githubUrl,homepageDomain:x.homepageDomain}))}}}]);
//# sourceMappingURL=component---src-pages-index-tsx-87c99922e22d3ff7b819.js.map