"use strict";(self.webpackChunkmergist=self.webpackChunkmergist||[]).push([[245],{2783:function(e,t,n){n.r(t),n.d(t,{default:function(){return be}});var r=n(6540),s=n(2738),i=n(7424),o=n(6188),l=n(7652),a=n(4848);function c(e){let{className:t="",children:n,onFilesAdded:r}=e;return(0,a.jsxs)("label",{className:`cursor-pointer ${t}`,children:[(0,a.jsx)("input",{className:"hidden",type:"file",accept:"application/pdf",onChange:function(e){(0,i.Al)(e);const t=e.target.files;t&&t.length>0&&r(t)},multiple:!0}),n]})}function d(e){return(0,a.jsx)(c,{className:"flex-col flex-1",onFilesAdded:e.onFilesAdded,children:(0,a.jsxs)("div",{className:"z-20 flex-col flex-1 gap-8 justify-center p-8 m-8 text-center rounded-lg border-2 border-dashed bg-base-100 hover:bg-base-200",children:[(0,a.jsx)(l.I,{icon:o.OXM,className:"fa-3x"}),(0,a.jsx)("p",{className:"flex-grow-0",children:"Drag and drop PDF files here, or click to select files"})]})})}function u(e){const{0:t,1:n}=(0,r.useState)(!1),s=(0,r.useRef)(0),o=(0,r.useCallback)((e=>{(0,i.Al)(e)}),[]),l=(0,r.useCallback)((e=>{(0,i.Al)(e),s.current++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&n(!0)}),[]),c=(0,r.useCallback)((e=>{(0,i.Al)(e),s.current--,s.current>0||n(!1)}),[]),d=(0,r.useCallback)((t=>{(0,i.Al)(t),n(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0&&(s.current=0,e.onFilesAdded(t.dataTransfer.files),t.dataTransfer.clearData())}),[e.onFilesAdded]);return(0,r.useEffect)((()=>(window.addEventListener("dragenter",l),window.addEventListener("dragleave",c),window.addEventListener("dragover",o),window.addEventListener("drop",d),()=>{window.removeEventListener("dragenter",l),window.removeEventListener("dragleave",c),window.removeEventListener("dragover",o),window.removeEventListener("drop",d)}))),(0,a.jsx)("div",{className:"fixed inset-0 flex-col justify-center items-center p-16 bg-base-100/50 z-10 "+(t?"":"hidden")})}var f=n(5128);function m(){const e=(0,r.useRef)(!1);return(0,f.E)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}var h=n(7745);var p=n(6719),x=n(8601);class g extends r.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function b({children:e,isPresent:t}){const n=(0,r.useId)(),s=(0,r.useRef)(null),i=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)((()=>{const{width:e,height:r,top:o,left:l}=i.current;if(t||!s.current||!e||!r)return;s.current.dataset.motionPopId=n;const a=document.createElement("style");return document.head.appendChild(a),a.sheet&&a.sheet.insertRule(`\n          [data-motion-pop-id="${n}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${r}px !important;\n            top: ${o}px !important;\n            left: ${l}px !important;\n          }\n        `),()=>{document.head.removeChild(a)}}),[t]),r.createElement(g,{isPresent:t,childRef:s,sizeRef:i},r.cloneElement(e,{ref:s}))}const v=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:o,mode:l})=>{const a=(0,x.M)(y),c=(0,r.useId)(),d=(0,r.useMemo)((()=>({id:c,initial:t,isPresent:n,custom:i,onExitComplete:e=>{a.set(e,!0);for(const t of a.values())if(!t)return;s&&s()},register:e=>(a.set(e,!1),()=>a.delete(e))})),o?void 0:[n]);return(0,r.useMemo)((()=>{a.forEach(((e,t)=>a.set(t,!1)))}),[n]),r.useEffect((()=>{!n&&!a.size&&s&&s()}),[n]),"popLayout"===l&&(e=r.createElement(b,{isPresent:n},e)),r.createElement(p.t.Provider,{value:d},e)};function y(){return new Map}var j=n(9473);var w=n(5238);const E=e=>e.key||"";const N=({children:e,custom:t,initial:n=!0,onExitComplete:s,exitBeforeEnter:i,presenceAffectsLayout:o=!0,mode:l="sync"})=>{(0,w.V)(!i,"Replace exitBeforeEnter with mode='wait'");const a=(0,r.useContext)(j.L).forceRender||function(){const e=m(),[t,n]=(0,r.useState)(0),s=(0,r.useCallback)((()=>{e.current&&n(t+1)}),[t]);return[(0,r.useCallback)((()=>h.Gt.postRender(s)),[s]),t]}()[0],c=m(),d=function(e){const t=[];return r.Children.forEach(e,(e=>{(0,r.isValidElement)(e)&&t.push(e)})),t}(e);let u=d;const p=(0,r.useRef)(new Map).current,x=(0,r.useRef)(u),g=(0,r.useRef)(new Map).current,b=(0,r.useRef)(!0);var y;if((0,f.E)((()=>{b.current=!1,function(e,t){e.forEach((e=>{const n=E(e);t.set(n,e)}))}(d,g),x.current=u})),y=()=>{b.current=!0,g.clear(),p.clear()},(0,r.useEffect)((()=>()=>y()),[]),b.current)return r.createElement(r.Fragment,null,u.map((e=>r.createElement(v,{key:E(e),isPresent:!0,initial:!!n&&void 0,presenceAffectsLayout:o,mode:l},e))));u=[...u];const N=x.current.map(E),R=d.map(E),C=N.length;for(let r=0;r<C;r++){const e=N[r];-1!==R.indexOf(e)||p.has(e)||p.set(e,void 0)}return"wait"===l&&p.size&&(u=[]),p.forEach(((e,n)=>{if(-1!==R.indexOf(n))return;const i=g.get(n);if(!i)return;const f=N.indexOf(n);let m=e;if(!m){const e=()=>{p.delete(n);const e=Array.from(g.keys()).filter((e=>!R.includes(e)));if(e.forEach((e=>g.delete(e))),x.current=d.filter((t=>{const r=E(t);return r===n||e.includes(r)})),!p.size){if(!1===c.current)return;a(),s&&s()}};m=r.createElement(v,{key:E(i),isPresent:!1,onExitComplete:e,custom:t,presenceAffectsLayout:o,mode:l},i),p.set(n,m)}u.splice(f,0,m)})),u=u.map((e=>{const t=e.key;return p.has(t)?e:r.createElement(v,{key:E(e),isPresent:!0,presenceAffectsLayout:o,mode:l},e)})),r.createElement(r.Fragment,null,p.size?u:u.map((e=>(0,r.cloneElement)(e))))};var R=n(8347),C=n(7383);const k={[C.P.SUCCESS]:{class:"alert-success",icon:o.Dnq},[C.P.WARNING]:{class:"alert-warning",icon:o.JAe},[C.P.ERROR]:{class:"alert-error",icon:o.lEd}};function A(e){const t=e.statusMsg.getSeverity,{0:n,1:s}=(0,r.useState)(!0),o={initial:"hidden",animate:"visible",exit:"hidden",variants:{visible:{opacity:1,scaleY:1},hidden:{opacity:0,scaleY:0}},...(0,i.xl)()};return(0,r.useEffect)((()=>{const e=setTimeout((()=>{s(!1)}),5e3);return()=>{clearTimeout(e)}}),[5e3]),(0,a.jsx)(N,{children:n&&(0,a.jsx)(R.P.div,{layout:!0,className:`alert shadow ${k[t].class}`,...o,children:(0,a.jsxs)("div",{children:[(0,a.jsx)(l.I,{icon:k[t].icon,className:"mr-2 fa-lg"}),(0,a.jsx)("span",{children:e.statusMsg.getMsg})]})},e.statusMsg.getId)})}function F(e){let{className:t="",disabled:n=!1,onClick:r,children:s}=e;return(0,a.jsx)("button",{className:`gap-2 btn-block ${t}`,disabled:n,onClick:r,children:s})}function M(e){const t={initial:{width:0},animate:{width:e.progress},transition:{type:"inertia",power:1,timeConstant:1e3,velocity:100}};return(0,a.jsx)("div",{className:"w-full h-1",children:(0,a.jsx)(R.P.div,{role:"progressbar",className:"h-full rounded-full bg-primary-content",...t})})}function I(e){const t=(0,a.jsxs)(F,{className:"btn-primary",disabled:e.disabled,onClick:e.onClick,children:[(0,a.jsx)(l.I,{icon:o.qIE}),"Merge Files"]});return(0,a.jsx)("div",{className:"flex-col gap-2 w-full text-center",children:e.disabled&&(0,a.jsx)("div",{className:"tooltip tooltip-warning","data-tip":"Please add more files to merge",children:t})||t})}function P(e){const t=e.progress>=1,n=`${(100*e.progress).toFixed(0)}%`;return(0,a.jsx)("div",{className:"flex-col gap-2 w-full text-center",children:(0,a.jsxs)(F,{className:"btn-primary flex-col justify-end p-0 border-0 overflow-hidden "+(t?"loading":""),disabled:!0,children:[!t&&n,(0,a.jsx)(M,{progress:n})]})})}function S(e){return(0,a.jsx)("a",{href:e.downloadUrl,target:"_blank",rel:"noopener noreferrer",download:"merged.pdf",className:"w-full",children:(0,a.jsxs)(F,{className:"btn-accent",children:[(0,a.jsx)(l.I,{icon:o.XYS}),"Download"]})})}function B(e){return e.downloadUrl?(0,a.jsx)(S,{downloadUrl:e.downloadUrl}):e.progress>0?(0,a.jsx)(P,{progress:e.progress}):(0,a.jsx)(I,{onClick:e.onClick,disabled:e.numOfFiles<2})}var L=n(712),D=n(1711);const T=(0,r.createContext)(null);var $=n(2358),G=n(2839);const O=(0,r.forwardRef)((function({children:e,as:t="ul",axis:n="y",onReorder:s,values:i,...o},l){const a=(0,x.M)((()=>(0,R.P)(t))),c=[],d=(0,r.useRef)(!1);(0,w.V)(Boolean(i),"Reorder.Group must be provided a values prop");const u={axis:n,registerItem:(e,t)=>{const r=c.findIndex((t=>e===t.value));-1!==r?c[r].layout=t[n]:c.push({value:e,layout:t[n]}),c.sort(U)},updateOrder:(e,t,n)=>{if(d.current)return;const r=function(e,t,n,r){if(!r)return e;const s=e.findIndex((e=>e.value===t));if(-1===s)return e;const i=r>0?1:-1,o=e[s+i];if(!o)return e;const l=e[s],a=o.layout,c=(0,G.j)(a.min,a.max,.5);return 1===i&&l.layout.max+n>c||-1===i&&l.layout.min+n<c?(0,$.Pe)(e,s,s+i):e}(c,e,t,n);c!==r&&(d.current=!0,s(r.map(z).filter((e=>-1!==i.indexOf(e)))))}};return(0,r.useEffect)((()=>{d.current=!1})),r.createElement(a,{...o,ref:l,ignoreStrict:!0},r.createElement(T.Provider,{value:u},e))}));function z(e){return e.value}function U(e,t){return e.layout.min-t.layout.min}var Y=n(4785),V=n(5446);function Z(e){const t=(0,x.M)((()=>(0,Y.OQ)(e))),{isStatic:n}=(0,r.useContext)(V.Q);if(n){const[,n]=(0,r.useState)(e);(0,r.useEffect)((()=>t.on("change",n)),[])}return t}var q=n(1486);function W(e,t){const n=Z(t()),r=()=>n.set(t());return r(),(0,f.E)((()=>{const t=()=>h.Gt.update(r,!1,!0),n=e.map((e=>e.on("change",t)));return()=>{n.forEach((e=>e())),(0,h.WG)(r)}})),n}function X(e,t,n,r){if("function"==typeof e)return function(e){Y.bt.current=[],e();const t=W(Y.bt.current,e);return Y.bt.current=void 0,t}(e);const s="function"==typeof t?t:function(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],s=e[1+n],i=e[2+n],o=e[3+n],l=(0,q.G)(s,i,{mixer:(a=i[0],(e=>e&&"object"==typeof e&&e.mix)(a)?a.mix:void 0),...o});var a;return t?l(r):l}(t,n,r);return Array.isArray(e)?J(e,s):J([e],(([e])=>s(e)))}function J(e,t){const n=(0,x.M)((()=>[]));return W(e,(()=>{n.length=0;const r=e.length;for(let t=0;t<r;t++)n[t]=e[t].get();return t(n)}))}var Q=n(9896);function _(e,t=0){return(0,Q.S)(e)?e:Z(t)}const H={Group:O,Item:(0,r.forwardRef)((function({children:e,style:t={},value:n,as:s="li",onDrag:i,layout:o=!0,...l},a){const c=(0,x.M)((()=>(0,R.P)(s))),d=(0,r.useContext)(T),u={x:_(t.x),y:_(t.y)},f=X([u.x,u.y],(([e,t])=>e||t?1:"unset"));(0,w.V)(Boolean(d),"Reorder.Item must be a child of Reorder.Group");const{axis:m,registerItem:h,updateOrder:p}=d;return r.createElement(c,{drag:m,...l,dragSnapToOrigin:!0,style:{...t,x:u.x,y:u.y,zIndex:f},layout:o,onDrag:(e,t)=>{const{velocity:r}=t;r[m]&&p(n,u[m].get(),r[m]),i&&i(e,t)},onLayoutMeasure:e=>h(n,e),ref:a,ignoreStrict:!0},e)}))},K=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],ee=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],te=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],ne=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],re=(e,t,n)=>{let r=e;return"string"==typeof t||Array.isArray(t)?r=e.toLocaleString(t,n):!0!==t&&void 0===n||(r=e.toLocaleString(void 0,n)),r},se=e=>{if("number"==typeof e)return Math.log10(e);const t=e.toString(10);return t.length+Math.log10("0."+t.slice(0,15))},ie=e=>"number"==typeof e?Math.log(e):se(e)*Math.log(10),oe=(e,t)=>{if("number"==typeof e)return e/t;const n=e/BigInt(t),r=e%BigInt(t);return Number(n)+Number(r)/t};function le(e,t){if("bigint"!=typeof e&&!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);const n=(t={bits:!1,binary:!1,space:!0,...t}).bits?t.binary?ne:te:t.binary?ee:K,r=t.space?" ":"";if(t.signed&&("number"==typeof e?0===e:0n===e))return` 0${r}${n[0]}`;const s=e<0,i=s?"-":t.signed?"+":"";let o;if(s&&(e=-e),void 0!==t.minimumFractionDigits&&(o={minimumFractionDigits:t.minimumFractionDigits}),void 0!==t.maximumFractionDigits&&(o={maximumFractionDigits:t.maximumFractionDigits,...o}),e<1){return i+re(e,t.locale,o)+r+n[0]}const l=Math.min(Math.floor(t.binary?ie(e)/Math.log(1024):se(e)/3),n.length-1);e=oe(e,(t.binary?1024:1e3)**l),o||(e=e.toPrecision(3));return i+re(Number(e),t.locale,o)+r+n[l]}var ae=n(3089);function ce(e){return(0,a.jsx)("button",{className:"btn-ghost sm:btn-square",type:"button",onClick:e.onClick,children:(0,a.jsx)(l.I,{icon:e.icon,className:"fa-lg"})})}function de(e){const t="bg-base-100 shadow-md flex-row justify-between p-2 gap-4 rounded-lg cursor-pointer overflow-hidden hover:bg-base-200 "+(e.disabled?"opacity-40":""),n={initial:{scale:0},animate:{scale:1},exit:{scale:0},...(0,i.xl)()};return(0,a.jsxs)(H.Item,{value:e.id,className:t,...n,children:[(0,a.jsxs)("div",{className:"overflow-hidden flex-row gap-0 items-center sm:gap-2",children:[(0,a.jsx)(ce,{icon:o.S9g}),(0,a.jsx)("p",{className:"overflow-hidden font-bold whitespace-nowrap text-ellipsis",children:e.name})]}),(0,a.jsxs)("div",{className:"overflow-hidden flex-row flex-none gap-0 items-center sm:gap-2",children:[(0,a.jsxs)("p",{className:"whitespace-nowrap",children:["(",le(e.size,{maximumFractionDigits:0}),")"]}),(0,a.jsx)("div",{className:"justify-end card-actions",children:(0,a.jsx)(ce,{icon:o.Jyw,onClick:()=>e.onRemove(e.id)})})]})]},e.id)}function ue(e){return(0,a.jsx)(H.Group,{axis:"y",values:e.fileIds,onReorder:e.onReorder,className:"overflow-hidden flex-col gap-5 px-6 py-7 shadow-inner bg-base-300",children:(0,a.jsx)(N,{children:e.fileIds.map((t=>(0,a.jsx)(de,{id:t,name:e.files[t].getName,size:e.files[t].getSize,onRemove:e.onFileRemoved,disabled:e.disabled},t)))})})}function fe(e){return(0,a.jsxs)("div",{tabIndex:0,className:"collapse",children:[(0,a.jsxs)("div",{className:"flex-col gap-4 justify-between items-center p-6 text-lg font-medium sm:flex-row sm:pl-10 collapse-title",children:[(0,a.jsxs)("h2",{children:[e.fileIds.length," file",1!==e.fileIds.length&&"s"," added (",le(Object.values(e.files).reduce(((e,t)=>e+t.getSize),0)),")"]}),(0,a.jsxs)("div",{className:"flex-row flex-1 gap-2 sm:flex-none",children:[(0,a.jsx)(c,{onFilesAdded:e.onFileAdded,children:(0,a.jsx)(ae.j,{icon:o.OXM,fake:!0,children:"Add File"})}),(0,a.jsx)(ae.j,{icon:o.yLS,onClick:e.onAllFilesRemoved,children:"Remove All"})]})]}),(0,a.jsx)("div",{style:{pointerEvents:e.disabled?"none":"initial"},onClick:e.disabled&&i.Al||void 0,className:"overflow-hidden",children:(0,a.jsx)(ue,{fileIds:e.fileIds,files:e.files,onReorder:e.onReorder,onFileRemoved:e.onFileRemoved,disabled:e.disabled})})]})}function me(e){let{className:t="",visible:n=!0,children:r}=e;return(0,a.jsx)("section",{className:`flex-col justify-center w-full h-full ${n?"":"hidden overflow-hidden "}${t}`,children:r})}var he=n(8890);function pe(e){return(0,a.jsx)("main",{className:"flex-col flex-1 w-full h-full",children:(0,a.jsx)(he.j,{className:"flex-1 sm:w-5/6",collapse:!0,children:e.children})})}var xe=n(1292);const ge=(0,i._G)(s.A);function be(){const{0:e,1:t}=(0,r.useState)([]),{0:n,1:s}=(0,r.useState)({}),{0:o,1:l}=(0,r.useState)([]),{0:c,1:f}=(0,r.useState)(""),{0:m,1:h}=(0,r.useState)(0),p=new i.ag(ge.shortTitle,ge.siteUrl);function x(e,n){void 0===n&&(n=null),p.removeMergedFile(c),n&&s(n),t(e),h(0),f("")}const g=(0,r.useCallback)((t=>{const[r,s]=p.filterInvalidFiles(n,Array.from(t));if(r.length>0){const t=n,s=[];for(const e of r)s.push(e.id),t[e.id]=e;x(e.concat(s),t)}s.length>0&&l(s)}),[e,n]);return(0,a.jsxs)(xe.M,{metadata:ge,children:[(0,a.jsx)(D.Y,{title:ge.shortTitle,children:ge.description}),(0,a.jsxs)(pe,{children:[(0,a.jsx)(u,{onFilesAdded:g}),(0,a.jsx)(me,{visible:o.length>0,className:"gap-5",children:o.map((e=>(0,a.jsx)(A,{statusMsg:e},e.getId)))}),(0,a.jsx)(me,{visible:0===e.length,className:"flex-1 rounded-none border bg-base-100 border-base-300 sm:rounded-box",children:(0,a.jsx)(d,{onFilesAdded:g})}),(0,a.jsx)(me,{visible:e.length>0,className:"rounded-none border bg-base-100 border-base-300 sm:rounded-box",children:(0,a.jsx)(fe,{fileIds:e,files:n,onReorder:function(e){x(e)},onFileAdded:g,onFileRemoved:function(t){const r=n,s=e.filter((e=>e!==t));delete r[t],x(s,r)},onAllFilesRemoved:function(){x([],{})},disabled:m>0})}),(0,a.jsx)(me,{visible:e.length>0,className:"px-6 sm:px-0",children:(0,a.jsx)(B,{numOfFiles:e.length,progress:m,downloadUrl:c,onClick:async function(){const[t,r]=await p.createMergedFile(n,e,h);""===t&&f(""),f(t),l(r),h(0)}})})]}),(0,a.jsx)(L.w,{author:ge.author,githubUrl:ge.githubUrl,homepageDomain:ge.homepageDomain})]})}}}]);
//# sourceMappingURL=component---src-pages-index-tsx-1dd5f85914e5f56aa03b.js.map