"use strict";(self.webpackChunkmergist=self.webpackChunkmergist||[]).push([[245],{7979:function(e,t,n){n.r(t),n.d(t,{default:function(){return se}});var r=n(6540),i=n(2738),s=n(7424),o=n(7815),a=n(6188),l=n(9955),c=n(4848);function d(e){return(0,c.jsxs)("label",{className:`cursor-pointer ${e.className}`,children:[(0,c.jsx)("input",{className:"hidden",type:"file",accept:"application/pdf",onChange:function(t){(0,s.Al)(t);const n=t.target.files;n&&n.length>0&&e.onFilesAdded(n)},multiple:!0}),e.children]})}function u(e){return(0,c.jsx)(d,{className:"flex-col flex-1",onFilesAdded:e.onFilesAdded,children:(0,c.jsxs)("div",{className:"z-20 flex-col flex-1 gap-8 justify-center p-8 m-8 text-center rounded-lg border-2 border-dashed bg-base-100 hover:bg-base-200",children:[(0,c.jsx)(l.I,{icon:a.OXM,tw:"fa-3x"}),(0,c.jsx)("p",{className:"flex-grow-0",children:"Drag and drop PDF files here, or click to select files"})]})})}function f(e){const{0:t,1:n}=(0,r.useState)(!1),i=(0,r.useRef)(0),o=(0,r.useCallback)((e=>{(0,s.Al)(e)}),[]),a=(0,r.useCallback)((e=>{(0,s.Al)(e),i.current++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&n(!0)}),[]),l=(0,r.useCallback)((e=>{(0,s.Al)(e),i.current--,i.current>0||n(!1)}),[]),d=(0,r.useCallback)((t=>{(0,s.Al)(t),n(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0&&(i.current=0,e.onFilesAdded(t.dataTransfer.files),t.dataTransfer.clearData())}),[e.onFilesAdded]);return(0,r.useEffect)((()=>(window.addEventListener("dragenter",a),window.addEventListener("dragleave",l),window.addEventListener("dragover",o),window.addEventListener("drop",d),()=>{window.removeEventListener("dragenter",a),window.removeEventListener("dragleave",l),window.removeEventListener("dragover",o),window.removeEventListener("drop",d)}))),(0,c.jsx)("div",{className:"fixed inset-0 flex-col justify-center items-center p-16 bg-base-100/50 z-10 "+(t?"":"hidden")})}d.defaultProps={className:""};var m=n(5128);function h(){const e=(0,r.useRef)(!1);return(0,m.E)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}var p=n(7745);var x=n(6719),g=n(8601);class v extends r.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function b({children:e,isPresent:t}){const n=(0,r.useId)(),i=(0,r.useRef)(null),s=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)((()=>{const{width:e,height:r,top:o,left:a}=s.current;if(t||!i.current||!e||!r)return;i.current.dataset.motionPopId=n;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${n}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${r}px !important;\n            top: ${o}px !important;\n            left: ${a}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}}),[t]),r.createElement(v,{isPresent:t,childRef:i,sizeRef:s},r.cloneElement(e,{ref:i}))}const y=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:s,presenceAffectsLayout:o,mode:a})=>{const l=(0,g.M)(w),c=(0,r.useId)(),d=(0,r.useMemo)((()=>({id:c,initial:t,isPresent:n,custom:s,onExitComplete:e=>{l.set(e,!0);for(const t of l.values())if(!t)return;i&&i()},register:e=>(l.set(e,!1),()=>l.delete(e))})),o?void 0:[n]);return(0,r.useMemo)((()=>{l.forEach(((e,t)=>l.set(t,!1)))}),[n]),r.useEffect((()=>{!n&&!l.size&&i&&i()}),[n]),"popLayout"===a&&(e=r.createElement(b,{isPresent:n},e)),r.createElement(x.t.Provider,{value:d},e)};function w(){return new Map}var j=n(9473);var E=n(5238);const R=e=>e.key||"";const A=({children:e,custom:t,initial:n=!0,onExitComplete:i,exitBeforeEnter:s,presenceAffectsLayout:o=!0,mode:a="sync"})=>{(0,E.V)(!s,"Replace exitBeforeEnter with mode='wait'");const l=(0,r.useContext)(j.L).forceRender||function(){const e=h(),[t,n]=(0,r.useState)(0),i=(0,r.useCallback)((()=>{e.current&&n(t+1)}),[t]);return[(0,r.useCallback)((()=>p.Gt.postRender(i)),[i]),t]}()[0],c=h(),d=function(e){const t=[];return r.Children.forEach(e,(e=>{(0,r.isValidElement)(e)&&t.push(e)})),t}(e);let u=d;const f=(0,r.useRef)(new Map).current,x=(0,r.useRef)(u),g=(0,r.useRef)(new Map).current,v=(0,r.useRef)(!0);var b;if((0,m.E)((()=>{v.current=!1,function(e,t){e.forEach((e=>{const n=R(e);t.set(n,e)}))}(d,g),x.current=u})),b=()=>{v.current=!0,g.clear(),f.clear()},(0,r.useEffect)((()=>()=>b()),[]),v.current)return r.createElement(r.Fragment,null,u.map((e=>r.createElement(y,{key:R(e),isPresent:!0,initial:!!n&&void 0,presenceAffectsLayout:o,mode:a},e))));u=[...u];const w=x.current.map(R),A=d.map(R),F=w.length;for(let r=0;r<F;r++){const e=w[r];-1!==A.indexOf(e)||f.has(e)||f.set(e,void 0)}return"wait"===a&&f.size&&(u=[]),f.forEach(((e,n)=>{if(-1!==A.indexOf(n))return;const s=g.get(n);if(!s)return;const m=w.indexOf(n);let h=e;if(!h){const e=()=>{f.delete(n);const e=Array.from(g.keys()).filter((e=>!A.includes(e)));if(e.forEach((e=>g.delete(e))),x.current=d.filter((t=>{const r=R(t);return r===n||e.includes(r)})),!f.size){if(!1===c.current)return;l(),i&&i()}};h=r.createElement(y,{key:R(s),isPresent:!1,onExitComplete:e,custom:t,presenceAffectsLayout:o,mode:a},s),f.set(n,h)}u.splice(m,0,h)})),u=u.map((e=>{const t=e.key;return f.has(t)?e:r.createElement(y,{key:R(e),isPresent:!0,presenceAffectsLayout:o,mode:a},e)})),r.createElement(r.Fragment,null,f.size?u:u.map((e=>(0,r.cloneElement)(e))))};var F=n(8347),M=n(7383);const N={[M.P.SUCCESS]:{class:"alert-success",icon:a.Dnq},[M.P.WARNING]:{class:"alert-warning",icon:a.JAe},[M.P.ERROR]:{class:"alert-error",icon:a.lEd}};function C(e){const t=e.statusMsg.getSeverity,{0:n,1:i}=(0,r.useState)(!0),o={initial:"hidden",animate:"visible",exit:"hidden",variants:{visible:{opacity:1,scaleY:1},hidden:{opacity:0,scaleY:0}},...(0,s.xl)()};return(0,r.useEffect)((()=>{const e=setTimeout((()=>{i(!1)}),5e3);return()=>{clearTimeout(e)}}),[5e3]),(0,c.jsx)(A,{children:n&&(0,c.jsx)(F.P.div,{layout:!0,className:`alert shadow ${N[t].class}`,...o,children:(0,c.jsxs)("div",{children:[(0,c.jsx)(l.I,{icon:N[t].icon,tw:"mr-2 fa-lg"}),(0,c.jsx)("span",{children:e.statusMsg.getMsg})]})},e.statusMsg.getId)})}var I=n(5016),P=n(4801),k=n(9822);const S=(0,r.createContext)(null);var B=n(2358),L=n(2839);const T=(0,r.forwardRef)((function({children:e,as:t="ul",axis:n="y",onReorder:i,values:s,...o},a){const l=(0,g.M)((()=>(0,F.P)(t))),c=[],d=(0,r.useRef)(!1);(0,E.V)(Boolean(s),"Reorder.Group must be provided a values prop");const u={axis:n,registerItem:(e,t)=>{const r=c.findIndex((t=>e===t.value));-1!==r?c[r].layout=t[n]:c.push({value:e,layout:t[n]}),c.sort(G)},updateOrder:(e,t,n)=>{if(d.current)return;const r=function(e,t,n,r){if(!r)return e;const i=e.findIndex((e=>e.value===t));if(-1===i)return e;const s=r>0?1:-1,o=e[i+s];if(!o)return e;const a=e[i],l=o.layout,c=(0,L.j)(l.min,l.max,.5);return 1===s&&a.layout.max+n>c||-1===s&&a.layout.min+n<c?(0,B.Pe)(e,i,i+s):e}(c,e,t,n);c!==r&&(d.current=!0,i(r.map(D).filter((e=>-1!==s.indexOf(e)))))}};return(0,r.useEffect)((()=>{d.current=!1})),r.createElement(l,{...o,ref:a,ignoreStrict:!0},r.createElement(S.Provider,{value:u},e))}));function D(e){return e.value}function G(e,t){return e.layout.min-t.layout.min}var z=n(4785),O=n(5446);function $(e){const t=(0,g.M)((()=>(0,z.OQ)(e))),{isStatic:n}=(0,r.useContext)(O.Q);if(n){const[,n]=(0,r.useState)(e);(0,r.useEffect)((()=>t.on("change",n)),[])}return t}var U=n(1486);function Y(e,t){const n=$(t()),r=()=>n.set(t());return r(),(0,m.E)((()=>{const t=()=>p.Gt.update(r,!1,!0),n=e.map((e=>e.on("change",t)));return()=>{n.forEach((e=>e())),(0,p.WG)(r)}})),n}function Z(e,t,n,r){if("function"==typeof e)return function(e){z.bt.current=[],e();const t=Y(z.bt.current,e);return z.bt.current=void 0,t}(e);const i="function"==typeof t?t:function(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],i=e[1+n],s=e[2+n],o=e[3+n],a=(0,U.G)(i,s,{mixer:(l=s[0],(e=>e&&"object"==typeof e&&e.mix)(l)?l.mix:void 0),...o});var l;return t?a(r):a}(t,n,r);return Array.isArray(e)?V(e,i):V([e],(([e])=>i(e)))}function V(e,t){const n=(0,g.M)((()=>[]));return Y(e,(()=>{n.length=0;const r=e.length;for(let t=0;t<r;t++)n[t]=e[t].get();return t(n)}))}var K=n(9896);function W(e,t=0){return(0,K.S)(e)?e:$(t)}const J={Group:T,Item:(0,r.forwardRef)((function({children:e,style:t={},value:n,as:i="li",onDrag:s,layout:o=!0,...a},l){const c=(0,g.M)((()=>(0,F.P)(i))),d=(0,r.useContext)(S),u={x:W(t.x),y:W(t.y)},f=Z([u.x,u.y],(([e,t])=>e||t?1:"unset"));(0,E.V)(Boolean(d),"Reorder.Item must be a child of Reorder.Group");const{axis:m,registerItem:h,updateOrder:p}=d;return r.createElement(c,{drag:m,...a,dragSnapToOrigin:!0,style:{...t,x:u.x,y:u.y,zIndex:f},layout:o,onDrag:(e,t)=>{const{velocity:r}=t;r[m]&&p(n,u[m].get(),r[m]),s&&s(e,t)},onLayoutMeasure:e=>h(n,e),ref:l,ignoreStrict:!0},e)}))},Q=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],X=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],q=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],H=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],_=(e,t,n)=>{let r=e;return"string"==typeof t||Array.isArray(t)?r=e.toLocaleString(t,n):!0!==t&&void 0===n||(r=e.toLocaleString(void 0,n)),r};function ee(e,t){if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);const n=(t={bits:!1,binary:!1,space:!0,...t}).bits?t.binary?H:q:t.binary?X:Q,r=t.space?" ":"";if(t.signed&&0===e)return` 0${r}${n[0]}`;const i=e<0,s=i?"-":t.signed?"+":"";let o;if(i&&(e=-e),void 0!==t.minimumFractionDigits&&(o={minimumFractionDigits:t.minimumFractionDigits}),void 0!==t.maximumFractionDigits&&(o={maximumFractionDigits:t.maximumFractionDigits,...o}),e<1){return s+_(e,t.locale,o)+r+n[0]}const a=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),n.length-1);e/=(t.binary?1024:1e3)**a,o||(e=e.toPrecision(3));return s+_(Number(e),t.locale,o)+r+n[a]}function te(e){const t="bg-base-100 shadow-md flex-row justify-between p-2 gap-4 rounded-lg cursor-pointer overflow-hidden hover:bg-base-200 "+(e.disabled?"opacity-40":""),n={initial:{scale:0},animate:{scale:1},exit:{scale:0},...(0,s.xl)()};return(0,c.jsxs)(J.Item,{value:e.id,className:t,...n,children:[(0,c.jsxs)("div",{className:"overflow-hidden flex-row gap-0 items-center sm:gap-2",children:[(0,c.jsx)(I.K0,{icon:a.S9g}),(0,c.jsx)("p",{className:"overflow-hidden font-bold whitespace-nowrap text-ellipsis",children:e.name})]}),(0,c.jsxs)("div",{className:"overflow-hidden flex-row flex-none gap-0 items-center sm:gap-2",children:[(0,c.jsxs)("p",{className:"whitespace-nowrap",children:["(",ee(e.size,{maximumFractionDigits:0}),")"]}),(0,c.jsx)("div",{className:"justify-end card-actions",children:(0,c.jsx)(I.K0,{icon:a.Jyw,onClick:()=>e.onRemove(e.id)})})]})]},e.id)}function ne(e){return(0,c.jsx)(J.Group,{axis:"y",values:e.fileIds,onReorder:e.onReorder,className:"overflow-hidden flex-col gap-5 px-6 py-7 shadow-inner bg-base-300",children:(0,c.jsx)(A,{children:e.fileIds.map((t=>(0,c.jsx)(te,{id:t,name:e.files[t].getName,size:e.files[t].getSize,onRemove:e.onFileRemoved,disabled:e.disabled},t)))})})}function re(e){return(0,c.jsxs)("div",{tabIndex:0,className:"collapse",children:[(0,c.jsxs)("div",{className:"flex-col gap-4 justify-between items-center p-6 text-lg font-medium sm:flex-row sm:pl-10 collapse-title",children:[(0,c.jsxs)("h2",{children:[e.fileIds.length," file",1!==e.fileIds.length&&"s"," added (",ee(Object.values(e.files).reduce(((e,t)=>e+t.getSize),0)),")"]}),(0,c.jsxs)("div",{className:"flex-row flex-1 gap-2 sm:flex-none",children:[(0,c.jsx)(d,{onFilesAdded:e.onFileAdded,children:(0,c.jsx)(I.jn,{icon:a.OXM,fake:!0,children:"Add File"})}),(0,c.jsx)(I.jn,{icon:a.yLS,onClick:e.onAllFilesRemoved,children:"Remove All"})]})]}),(0,c.jsx)("div",{style:{pointerEvents:e.disabled?"none":"initial"},onClick:e.disabled&&s.Al||void 0,className:"overflow-hidden",children:(0,c.jsx)(ne,{fileIds:e.fileIds,files:e.files,onReorder:e.onReorder,onFileRemoved:e.onFileRemoved,disabled:e.disabled})})]})}const ie=(0,s._G)(i.A);function se(){const{0:e,1:t}=(0,r.useState)([]),{0:n,1:i}=(0,r.useState)({}),{0:a,1:l}=(0,r.useState)([]),{0:d,1:m}=(0,r.useState)(""),{0:h,1:p}=(0,r.useState)(0),x=new s.ag(ie.shortTitle,ie.siteUrl);function g(e,n){void 0===n&&(n=null),x.removeMergedFile(d),n&&i(n),t(e),p(0),m("")}const v=(0,r.useCallback)((t=>{const[r,i]=x.filterInvalidFiles(n,Array.from(t));if(r.length>0){const t=n,i=[];for(const e of r)i.push(e.id),t[e.id]=e;g(e.concat(i),t)}i.length>0&&l(i)}),[e,n]);return(0,c.jsxs)(o.Mx,{metadata:ie,children:[(0,c.jsx)(k.A,{title:ie.shortTitle,children:ie.description}),(0,c.jsxs)(o.gZ,{children:[(0,c.jsx)(f,{onFilesAdded:v}),(0,c.jsx)(o.wn,{visible:a.length>0,className:"gap-5",children:a.map((e=>(0,c.jsx)(C,{statusMsg:e},e.getId)))}),(0,c.jsx)(o.wn,{visible:0===e.length,tabIndex:0,className:"flex-1 rounded-none border bg-base-100 border-base-300 sm:rounded-box",children:(0,c.jsx)(u,{onFilesAdded:v})}),(0,c.jsx)(o.wn,{visible:e.length>0,tabIndex:0,className:"rounded-none border bg-base-100 border-base-300 sm:rounded-box",children:(0,c.jsx)(re,{fileIds:e,files:n,onReorder:function(e){g(e)},onFileAdded:v,onFileRemoved:function(t){const r=n,i=e.filter((e=>e!==t));delete r[t],g(i,r)},onAllFilesRemoved:function(){g([],{})},disabled:h>0})}),(0,c.jsx)(o.wn,{visible:e.length>0,className:"px-6 sm:px-0",children:(0,c.jsx)(I.rA,{numOfFiles:e.length,progress:h,downloadUrl:d,onClick:async function(){const[t,r]=await x.createMergedFile(n,e,p);""===t&&m(""),m(t),l(r),p(0)}})})]}),(0,c.jsx)(P.A,{author:ie.author,githubUrl:ie.githubUrl,homepageDomain:ie.homepageDomain})]})}}}]);
//# sourceMappingURL=component---src-pages-index-tsx-98518c1b366fc93c1673.js.map