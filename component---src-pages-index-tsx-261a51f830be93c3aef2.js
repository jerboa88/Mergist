"use strict";(self.webpackChunkmergist=self.webpackChunkmergist||[]).push([[245],{3497:function(e,n,t){t.r(n),t.d(n,{default:function(){return ye}});var s=t(6540),i=t(2738),r=t(7424),o=t(6188),l=t(7652),a=t(4848);function c(e){let{className:n="",children:t,onFilesAdded:s}=e;return(0,a.jsxs)("label",{className:`cursor-pointer ${n}`,children:[(0,a.jsx)("input",{className:"hidden",type:"file",accept:"application/pdf",onChange:function(e){(0,r.Al)(e);const n=e.target.files;n&&n.length>0&&s(n)},multiple:!0}),t]})}function d(e){return(0,a.jsx)(c,{className:"flex-col flex-1",onFilesAdded:e.onFilesAdded,children:(0,a.jsxs)("div",{className:"z-20 flex-col flex-1 gap-8 justify-center p-8 m-8 text-center rounded-lg border-2 border-dashed transition-colors bg-base-100 hover:bg-base-200",children:[(0,a.jsx)(l.I,{icon:o.OXM,className:"fa-3x"}),(0,a.jsx)("p",{className:"flex-grow-0",children:"Drag and drop PDF files here, or click to select files"})]})})}function u(e){const{0:n,1:t}=(0,s.useState)(!1),i=(0,s.useRef)(0),o=(0,s.useCallback)((e=>{(0,r.Al)(e)}),[]),l=(0,s.useCallback)((e=>{(0,r.Al)(e),i.current++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&t(!0)}),[]),c=(0,s.useCallback)((e=>{(0,r.Al)(e),i.current--,i.current>0||t(!1)}),[]),d=(0,s.useCallback)((n=>{(0,r.Al)(n),t(!1),n.dataTransfer.files&&n.dataTransfer.files.length>0&&(i.current=0,e.onFilesAdded(n.dataTransfer.files),n.dataTransfer.clearData())}),[e.onFilesAdded]);return(0,s.useEffect)((()=>(window.addEventListener("dragenter",l),window.addEventListener("dragleave",c),window.addEventListener("dragover",o),window.addEventListener("drop",d),()=>{window.removeEventListener("dragenter",l),window.removeEventListener("dragleave",c),window.removeEventListener("dragover",o),window.removeEventListener("drop",d)}))),(0,a.jsx)("div",{className:"fixed inset-0 flex-col justify-center items-center p-16 bg-base-100/50 z-10 "+(n?"":"hidden")})}var f=t(9473),h=t(8601),m=t(5128),p=t(6719),x=t(6995),g=t(5446);class b extends s.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const e=n.offsetParent,t=(0,x.s)(e)&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=t-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function v({children:e,isPresent:n,anchorX:t}){const i=(0,s.useId)(),r=(0,s.useRef)(null),o=(0,s.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=(0,s.useContext)(g.Q);return(0,s.useInsertionEffect)((()=>{const{width:e,height:s,top:a,left:c,right:d}=o.current;if(n||!r.current||!e||!s)return;const u="left"===t?`left: ${c}`:`right: ${d}`;r.current.dataset.motionPopId=i;const f=document.createElement("style");return l&&(f.nonce=l),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`\n          [data-motion-pop-id="${i}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${s}px !important;\n            ${u}px !important;\n            top: ${a}px !important;\n          }\n        `),()=>{document.head.contains(f)&&document.head.removeChild(f)}}),[n]),(0,a.jsx)(b,{isPresent:n,childRef:r,sizeRef:o,children:s.cloneElement(e,{ref:r})})}const j=({children:e,initial:n,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:l,anchorX:c})=>{const d=(0,h.M)(w),u=(0,s.useId)();let f=!0,m=(0,s.useMemo)((()=>(f=!1,{id:u,initial:n,isPresent:t,custom:r,onExitComplete:e=>{d.set(e,!0);for(const n of d.values())if(!n)return;i&&i()},register:e=>(d.set(e,!1),()=>d.delete(e))})),[t,d,i]);return o&&f&&(m={...m}),(0,s.useMemo)((()=>{d.forEach(((e,n)=>d.set(n,!1)))}),[t]),s.useEffect((()=>{!t&&!d.size&&i&&i()}),[t]),"popLayout"===l&&(e=(0,a.jsx)(v,{isPresent:t,anchorX:c,children:e})),(0,a.jsx)(p.t.Provider,{value:m,children:e})};function w(){return new Map}var y=t(9120);const N=e=>e.key||"";function E(e){const n=[];return s.Children.forEach(e,(e=>{(0,s.isValidElement)(e)&&n.push(e)})),n}const F=({children:e,custom:n,initial:t=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:o="sync",propagate:l=!1,anchorX:c="left"})=>{const[d,u]=(0,y.xQ)(l),p=(0,s.useMemo)((()=>E(e)),[e]),x=l&&!d?[]:p.map(N),g=(0,s.useRef)(!0),b=(0,s.useRef)(p),v=(0,h.M)((()=>new Map)),[w,F]=(0,s.useState)(p),[C,M]=(0,s.useState)(p);(0,m.E)((()=>{g.current=!1,b.current=p;for(let e=0;e<C.length;e++){const n=N(C[e]);x.includes(n)?v.delete(n):!0!==v.get(n)&&v.set(n,!1)}}),[C,x.length,x.join("-")]);const A=[];if(p!==w){let e=[...p];for(let n=0;n<C.length;n++){const t=C[n],s=N(t);x.includes(s)||(e.splice(n,0,t),A.push(t))}return"wait"===o&&A.length&&(e=A),M(E(e)),F(p),null}const{forceRender:R}=(0,s.useContext)(f.L);return(0,a.jsx)(a.Fragment,{children:C.map((e=>{const s=N(e),f=!(l&&!d)&&(p===C||x.includes(s));return(0,a.jsx)(j,{isPresent:f,initial:!(g.current&&!t)&&void 0,custom:n,presenceAffectsLayout:r,mode:o,onExitComplete:f?void 0:()=>{if(!v.has(s))return;v.set(s,!0);let e=!0;v.forEach((n=>{n||(e=!1)})),e&&(R?.(),M(b.current),l&&u?.(),i&&i())},anchorX:c,children:e},s)}))})};var C=t(6180),M=t(7383);const A={[M.P.Success]:{class:"alert-success",icon:o.Dnq},[M.P.Warning]:{class:"alert-warning",icon:o.JAe},[M.P.Error]:{class:"alert-error",icon:o.lEd}};function R(e){const n=e.statusMsg.getSeverity,{0:t,1:i}=(0,s.useState)(!0),o={initial:"hidden",animate:"visible",exit:"hidden",variants:{visible:{opacity:1,scaleY:1},hidden:{opacity:0,scaleY:0}},...(0,r.xl)()};return(0,s.useEffect)((()=>{const e=setTimeout((()=>{i(!1)}),5e3);return()=>{clearTimeout(e)}}),[]),(0,a.jsx)(F,{children:t&&(0,a.jsxs)(C.P.div,{layout:!0,className:`alert shadow ${A[n].class}`,...o,children:[(0,a.jsx)(l.I,{icon:A[n].icon,className:"mr-2 fa-lg"}),(0,a.jsx)("span",{children:e.statusMsg.getMsg})]},e.statusMsg.getId)})}function k(e){let{className:n="",disabled:t=!1,onClick:s,children:i}=e;return(0,a.jsx)("button",{type:"button",className:`gap-2 btn-block ${n}`,disabled:t,onClick:s,children:i})}function I(e){const n={initial:{width:0},animate:{width:e.progress},transition:{type:"inertia",power:1,timeConstant:1e3,velocity:100}};return(0,a.jsx)("div",{className:"w-full h-1",children:(0,a.jsx)(C.P.div,{role:"progressbar",className:"h-full rounded-full bg-primary-content",...n})})}function P(e){const n=(0,a.jsxs)(k,{className:"btn-primary",disabled:e.disabled,onClick:e.onClick,children:[(0,a.jsx)(l.I,{icon:o.qIE}),"Merge Files"]});return(0,a.jsx)("div",{className:"flex-col gap-2 w-full text-center",children:e.disabled&&(0,a.jsx)("div",{className:"tooltip tooltip-warning","data-tip":"Please add more files to merge",children:n})||n})}function S(e){const n=e.progress>=1,t=`${(100*e.progress).toFixed(0)}%`,s=n?(0,a.jsx)("span",{className:"loading"}):t;return(0,a.jsx)("div",{className:"flex-col gap-2 w-full text-center",children:(0,a.jsxs)(k,{className:"overflow-hidden flex-col justify-end p-0 border-0 btn-primary",disabled:!0,children:[s,(0,a.jsx)(I,{progress:t})]})})}function B(e){return(0,a.jsx)("a",{href:e.downloadUrl,target:"_blank",rel:"noopener noreferrer",download:"merged.pdf",className:"w-full",children:(0,a.jsxs)(k,{className:"btn-accent",children:[(0,a.jsx)(l.I,{icon:o.XYS}),"Download"]})})}function L(e){return e.downloadUrl?(0,a.jsx)(B,{downloadUrl:e.downloadUrl}):e.progress>0?(0,a.jsx)(S,{progress:e.progress}):(0,a.jsx)(P,{onClick:e.onClick,disabled:e.numOfFiles<2})}var T=t(712),D=t(1711),$=t(9495),U=t(8104);const z=(0,s.createContext)(null);var G=t(4766);function O(e){const n=(0,h.M)((()=>(0,G.OQ)(e))),{isStatic:t}=(0,s.useContext)(g.Q);if(t){const[,t]=(0,s.useState)(e);(0,s.useEffect)((()=>n.on("change",t)),[])}return n}var X=t(5219);var Y=t(1207);function Q(e,n){const t=O(n()),s=()=>t.set(n());return s(),(0,m.E)((()=>{const n=()=>Y.Gt.preRender(s,!1,!0),t=e.map((e=>e.on("change",n)));return()=>{t.forEach((e=>e())),(0,Y.WG)(s)}})),t}function W(e,n,t,s){if("function"==typeof e)return function(e){G.bt.current=[],e();const n=Q(G.bt.current,e);return G.bt.current=void 0,n}(e);const i="function"==typeof n?n:function(...e){const n=!Array.isArray(e[0]),t=n?0:-1,s=e[0+t],i=e[1+t],r=e[2+t],o=e[3+t],l=(0,X.G)(i,r,o);return n?l(s):l}(n,t,s);return Array.isArray(e)?Z(e,i):Z([e],(([e])=>i(e)))}function Z(e,n){const t=(0,h.M)((()=>[]));return Q(e,(()=>{t.length=0;const s=e.length;for(let n=0;n<s;n++)t[n]=e[n].get();return n(t)}))}function q(e,n=0){return(0,$.S)(e)?e:O(n)}function V({children:e,style:n={},value:t,as:i="li",onDrag:r,layout:o=!0,...l},c){const d=(0,h.M)((()=>C.P[i])),u=(0,s.useContext)(z),f={x:q(n.x),y:q(n.y)},m=W([f.x,f.y],(([e,n])=>e||n?1:"unset"));(0,U.V)(Boolean(u),"Reorder.Item must be a child of Reorder.Group");const{axis:p,registerItem:x,updateOrder:g}=u;return(0,a.jsx)(d,{drag:p,...l,dragSnapToOrigin:!0,style:{...n,x:f.x,y:f.y,zIndex:m},layout:o,onDrag:(e,n)=>{const{velocity:s}=n;s[p]&&g(t,f[p].get(),s[p]),r&&r(e,n)},onLayoutMeasure:e=>x(t,e),ref:c,ignoreStrict:!0,children:e})}const J=(0,s.forwardRef)(V);var K=t(5744),_=t(2192);function H({children:e,as:n="ul",axis:t="y",onReorder:i,values:r,...o},l){const c=(0,h.M)((()=>C.P[n])),d=[],u=(0,s.useRef)(!1);(0,U.V)(Boolean(r),"Reorder.Group must be provided a values prop");const f={axis:t,registerItem:(e,n)=>{const s=d.findIndex((n=>e===n.value));-1!==s?d[s].layout=n[t]:d.push({value:e,layout:n[t]}),d.sort(te)},updateOrder:(e,n,t)=>{if(u.current)return;const s=function(e,n,t,s){if(!s)return e;const i=e.findIndex((e=>e.value===n));if(-1===i)return e;const r=s>0?1:-1,o=e[i+r];if(!o)return e;const l=e[i],a=o.layout,c=(0,K.k)(a.min,a.max,.5);return 1===r&&l.layout.max+t>c||-1===r&&l.layout.min+t<c?(0,_.Pe)(e,i,i+r):e}(d,e,n,t);d!==s&&(u.current=!0,i(s.map(ne).filter((e=>-1!==r.indexOf(e)))))}};return(0,s.useEffect)((()=>{u.current=!1})),(0,a.jsx)(c,{...o,ref:l,ignoreStrict:!0,children:(0,a.jsx)(z.Provider,{value:f,children:e})})}const ee=(0,s.forwardRef)(H);function ne(e){return e.value}function te(e,n){return e.layout.min-n.layout.min}const se=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],ie=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],re=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],oe=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],le=(e,n,t)=>{let s=e;return"string"==typeof n||Array.isArray(n)?s=e.toLocaleString(n,t):!0!==n&&void 0===t||(s=e.toLocaleString(void 0,t)),s},ae=e=>{if("number"==typeof e)return Math.log10(e);const n=e.toString(10);return n.length+Math.log10("0."+n.slice(0,15))},ce=e=>"number"==typeof e?Math.log(e):ae(e)*Math.log(10),de=(e,n)=>{if("number"==typeof e)return e/n;const t=e/BigInt(n),s=e%BigInt(n);return Number(t)+Number(s)/n};function ue(e,n){if("bigint"!=typeof e&&!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);const t=(n={bits:!1,binary:!1,space:!0,...n}).bits?n.binary?oe:re:n.binary?ie:se,s=n.space?" ":"";if(n.signed&&("number"==typeof e?0===e:0n===e))return` 0${s}${t[0]}`;const i=e<0,r=i?"-":n.signed?"+":"";let o;if(i&&(e=-e),void 0!==n.minimumFractionDigits&&(o={minimumFractionDigits:n.minimumFractionDigits}),void 0!==n.maximumFractionDigits&&(o={maximumFractionDigits:n.maximumFractionDigits,...o}),e<1){return r+le(e,n.locale,o)+s+t[0]}const l=Math.min(Math.floor(n.binary?ce(e)/Math.log(1024):ae(e)/3),t.length-1);e=de(e,(n.binary?1024:1e3)**l),o||(e=e.toPrecision(3));return r+le(Number(e),n.locale,o)+s+t[l]}var fe=t(3089);function he(e){return(0,a.jsx)("button",{type:"button",className:"btn-ghost sm:btn-square",onClick:e.onClick,children:(0,a.jsx)(l.I,{icon:e.icon,className:"fa-lg"})})}function me(e){const n="bg-base-100 shadow-md flex-row justify-between p-2 gap-4 rounded-lg cursor-pointer overflow-hidden hover:bg-base-200 "+(e.disabled?"opacity-40":""),t={initial:{scale:0},animate:{scale:1},exit:{scale:0},...(0,r.xl)()};return(0,a.jsxs)(J,{value:e.id,className:n,...t,children:[(0,a.jsxs)("div",{className:"overflow-hidden flex-row gap-0 items-center sm:gap-2",children:[(0,a.jsx)(he,{icon:o.S9g}),(0,a.jsx)("p",{className:"overflow-hidden font-bold whitespace-nowrap text-ellipsis",children:e.name})]}),(0,a.jsxs)("div",{className:"overflow-hidden flex-row flex-none gap-0 items-center sm:gap-2",children:[(0,a.jsxs)("p",{className:"whitespace-nowrap",children:["(",ue(e.size,{maximumFractionDigits:0}),")"]}),(0,a.jsx)("div",{className:"justify-end card-actions",children:(0,a.jsx)(he,{icon:o.Jyw,onClick:()=>e.onRemove(e.id)})})]})]},e.id)}function pe(e){return(0,a.jsx)(ee,{axis:"y",values:e.fileIds,onReorder:e.onReorder,className:"overflow-hidden flex-col gap-5 px-6 py-7 shadow-inner bg-base-300",children:(0,a.jsx)(F,{children:e.fileIds.map((n=>(0,a.jsx)(me,{id:n,name:e.files[n].getName,size:e.files[n].getSize,onRemove:e.onFileRemoved,disabled:e.disabled},n)))})})}function xe(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex-col gap-4 justify-between items-center p-6 text-lg font-medium sm:flex-row sm:pl-10",children:[(0,a.jsxs)("h2",{children:[e.fileIds.length," file",1!==e.fileIds.length&&"s"," added (",ue(Object.values(e.files).reduce(((e,n)=>e+n.getSize),0)),")"]}),(0,a.jsxs)("div",{className:"flex-row flex-1 gap-2 sm:flex-none",children:[(0,a.jsx)(c,{onFilesAdded:e.onFileAdded,children:(0,a.jsx)(fe.j,{icon:o.OXM,fake:!0,children:"Add File"})}),(0,a.jsx)(fe.j,{icon:o.yLS,onClick:e.onAllFilesRemoved,children:"Remove All"})]})]}),(0,a.jsx)("div",{style:{pointerEvents:e.disabled?"none":"initial"},onClick:e.disabled?r.Al:void 0,onKeyUp:e.disabled?r.Al:void 0,className:"overflow-hidden",children:(0,a.jsx)(pe,{fileIds:e.fileIds,files:e.files,onReorder:e.onReorder,onFileRemoved:e.onFileRemoved,disabled:e.disabled})})]})}function ge(e){let{className:n="",visible:t=!0,children:s}=e;return(0,a.jsx)("section",{className:`flex-col justify-center w-full h-full ${t?"":"hidden overflow-hidden "}${n}`,children:s})}var be=t(8890);function ve(e){return(0,a.jsx)("main",{className:"flex-col flex-1 w-full h-full",children:(0,a.jsx)(be.j,{className:"flex-1 sm:w-5/6",collapse:!0,children:e.children})})}var je=t(3772);const we=(0,r._G)(i.A);function ye(){const{0:e,1:n}=(0,s.useState)([]),{0:t,1:i}=(0,s.useState)({}),{0:o,1:l}=(0,s.useState)([]),{0:c,1:f}=(0,s.useState)(""),{0:h,1:m}=(0,s.useState)(0),p=new r.gT(we.shortTitle,we.siteUrl);function x(e,t){void 0===t&&(t=null),p.removeMergedFile(c),t&&i(t),n(e),m(0),f("")}const g=(0,s.useCallback)((n=>{const[s,i]=p.filterInvalidFiles(t,Array.from(n));if(s.length>0){const n=t,i=[];for(const e of s)i.push(e.id),n[e.id]=e;x(e.concat(i),n)}i.length>0&&l(i)}),[e,t]);return(0,a.jsxs)(je.M,{metadata:we,children:[(0,a.jsx)(D.Y,{title:we.shortTitle,children:we.description}),(0,a.jsxs)(ve,{children:[(0,a.jsx)(u,{onFilesAdded:g}),(0,a.jsx)(ge,{visible:o.length>0,className:"gap-5",children:o.map((e=>(0,a.jsx)(R,{statusMsg:e},e.getId)))}),(0,a.jsx)(ge,{visible:0===e.length,className:"flex-1 rounded-none border bg-base-100 border-base-300 sm:rounded-box",children:(0,a.jsx)(d,{onFilesAdded:g})}),(0,a.jsx)(ge,{visible:e.length>0,className:"rounded-none border bg-base-100 border-base-300 sm:rounded-box",children:(0,a.jsx)(xe,{fileIds:e,files:t,onReorder:function(e){x(e)},onFileAdded:g,onFileRemoved:function(n){const s=t,i=e.filter((e=>e!==n));delete s[n],x(i,s)},onAllFilesRemoved:function(){x([],{})},disabled:h>0})}),(0,a.jsx)(ge,{visible:e.length>0,className:"px-6 sm:px-0",children:(0,a.jsx)(L,{numOfFiles:e.length,progress:h,downloadUrl:c,onClick:async function(){const[n,s]=await p.createMergedFile(t,e,m);""===n&&f(""),f(n),l(s),m(0)}})})]}),(0,a.jsx)(T.w,{author:we.author,githubUrl:we.githubUrl,homepageDomain:we.homepageDomain})]})}}}]);
//# sourceMappingURL=component---src-pages-index-tsx-261a51f830be93c3aef2.js.map