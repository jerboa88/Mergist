"use strict";(self.webpackChunkMergist=self.webpackChunkMergist||[]).push([[691],{6827:function(e,t,n){n.r(t),n.d(t,{default:function(){return ve}});var r=n(946),i=n(8215),a=n.n(i),o=n(921),l=n(3097),c=n(9063),u=n(8121),s=n(4332),f=n(1303);function d(e){return o.createElement("label",{className:"cursor-pointer "+e.className},o.createElement("input",{className:"hidden",type:"file",accept:"application/pdf",onChange:function(t){(0,c.$K)(t);var n=t.target.files;n&&n.length>0&&e.onFilesAdded(n)},multiple:!0}),e.children)}function m(e){return o.createElement(d,{className:"flex flex-col flex-1",onFilesAdded:e.onFilesAdded},o.createElement("div",{className:"flex flex-col justify-center flex-1 m-8 p-8 gap-8 text-center z-20 bg-base-100 hover:bg-base-200 border-2 border-dashed rounded-lg transition-color duration-200"},o.createElement(s.G,{icon:f.b7h,className:"fa-3x"}),o.createElement("p",{className:"flex-grow-0"},"Drag and drop PDF files here, or click to select files")))}function v(e){var t=(0,o.useState)(!1),n=t[0],r=t[1],i=(0,o.useRef)(0);function a(e){e.preventDefault(),e.stopPropagation()}var l=(0,o.useCallback)((function(e){a(e)}),[]),c=(0,o.useCallback)((function(e){a(e),i.current++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&r(!0)}),[]),u=(0,o.useCallback)((function(e){a(e),i.current--,i.current>0||r(!1)}),[]),s=(0,o.useCallback)((function(t){a(t),r(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0&&(i.current=0,e.onFilesAdded(t.dataTransfer.files),t.dataTransfer.clearData())}),[e.onFilesAdded]);return(0,o.useEffect)((function(){return window.addEventListener("dragenter",c),window.addEventListener("dragleave",u),window.addEventListener("dragover",l),window.addEventListener("drop",s),function(){window.removeEventListener("dragenter",c),window.removeEventListener("dragleave",u),window.removeEventListener("dragover",l),window.removeEventListener("drop",s)}})),o.createElement("div",{className:"fixed inset-0 flex flex-col justify-center items-center p-16 bg-base-100/50 z-10 "+(n?"":"hidden")})}d.defaultProps={className:""};var p=n(6944),g=n(2404),b=n(333);function h(){var e=(0,o.useRef)(!1);return(0,b.L)((function(){return e.current=!0,function(){e.current=!1}}),[]),e}var y=n(9253),E=n(1240),x=n(7732),w=function(e){var t=e.children,n=e.initial,r=e.isPresent,i=e.onExitComplete,a=e.custom,l=e.presenceAffectsLayout,c=(0,E.h)(R),u=(0,x.M)(),s=(0,o.useMemo)((function(){return{id:u,initial:n,isPresent:r,custom:a,onExitComplete:function(e){var t,n;c.set(e,!0);try{for(var r=(0,p.XA)(c.values()),a=r.next();!a.done;a=r.next()){if(!a.value)return}}catch(o){t={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}null==i||i()},register:function(e){return c.set(e,!1),function(){return c.delete(e)}}}}),l?void 0:[r]);return(0,o.useMemo)((function(){c.forEach((function(e,t){return c.set(t,!1)}))}),[r]),o.useEffect((function(){!r&&!c.size&&(null==i||i())}),[r]),o.createElement(y.O.Provider,{value:s},t)};function R(){return new Map}var k=n(8310),C=n(4411),A=function(e){return e.key||""};var F,O=function(e){var t=e.children,n=e.custom,r=e.initial,i=void 0===r||r,a=e.onExitComplete,l=e.exitBeforeEnter,c=e.presenceAffectsLayout,u=void 0===c||c,s=(0,p.CR)(function(){var e=h(),t=(0,p.CR)((0,o.useState)(0),2),n=t[0],r=t[1],i=(0,o.useCallback)((function(){e.current&&r(n+1)}),[n]);return[(0,o.useCallback)((function(){return g.ZP.postRender(i)}),[i]),n]}(),1),f=s[0],d=(0,o.useContext)(k.p).forceRender;d&&(f=d);var m=h(),v=function(e){var t=[];return o.Children.forEach(e,(function(e){(0,o.isValidElement)(e)&&t.push(e)})),t}(t),y=v,E=new Set,x=(0,o.useRef)(y),R=(0,o.useRef)(new Map).current,F=(0,o.useRef)(!0);if((0,b.L)((function(){F.current=!1,function(e,t){e.forEach((function(e){var n=A(e);t.set(n,e)}))}(v,R),x.current=y})),(0,C.z)((function(){F.current=!0,R.clear(),E.clear()})),F.current)return o.createElement(o.Fragment,null,y.map((function(e){return o.createElement(w,{key:A(e),isPresent:!0,initial:!!i&&void 0,presenceAffectsLayout:u},e)})));y=(0,p.ev)([],(0,p.CR)(y),!1);for(var O=x.current.map(A),N=v.map(A),M=O.length,S=0;S<M;S++){var I=O[S];-1===N.indexOf(I)&&E.add(I)}return l&&E.size&&(y=[]),E.forEach((function(e){if(-1===N.indexOf(e)){var t=R.get(e);if(t){var r=O.indexOf(e);y.splice(r,0,o.createElement(w,{key:A(t),isPresent:!1,onExitComplete:function(){R.delete(e),E.delete(e);var t=x.current.findIndex((function(t){return t.key===e}));if(x.current.splice(t,1),!E.size){if(x.current=v,!1===m.current)return;f(),a&&a()}},custom:n,presenceAffectsLayout:u},t))}}})),y=y.map((function(e){var t=e.key;return E.has(t)?e:o.createElement(w,{key:A(e),isPresent:!0,presenceAffectsLayout:u},e)})),o.createElement(o.Fragment,null,E.size?y:y.map((function(e){return(0,o.cloneElement)(e)})))},N=n(3741),M=n(8002),S=((F={})[M.X.SUCCESS]={class:"alert-success",icon:f.chG},F[M.X.WARNING]={class:"alert-warning",icon:f.ik8},F[M.X.ERROR]={class:"alert-error",icon:f.xHz},F);function I(e){var t=e.statusMsg.getSeverity,n=(0,o.useState)(!0),r=n[0],i=n[1];return(0,o.useEffect)((function(){var e=setTimeout((function(){i(!1)}),4e3);return function(){clearTimeout(e)}}),[4e3]),o.createElement(O,null,r&&o.createElement(N.E.div,{layout:!0,className:"alert "+S[t].class+" shadow-md",key:e.statusMsg.getId,initial:{opacity:0,scaleY:0},animate:{opacity:1,scaleY:1},exit:{opacity:0,scaleY:0}},o.createElement("div",null,o.createElement(s.G,{icon:S[t].icon,className:"mr-2 fa-lg"}),o.createElement("span",null,e.statusMsg.getMsg))))}var P=n(3313),j=n(7083),B=n(5999),D=n(702),T=(0,o.createContext)(null),L=n(4566),z=n(7029);var G=(0,o.forwardRef)((function(e,t){var n=e.children,r=e.as,i=void 0===r?"ul":r,a=e.axis,l=void 0===a?"y":a,c=e.onReorder,u=e.values,s=(0,p._T)(e,["children","as","axis","onReorder","values"]),f=(0,E.h)((function(){return(0,N.E)(i)})),d=[],m=(0,o.useRef)(!1);(0,D.k)(Boolean(u),"Reorder.Group must be provided a values prop");var v={axis:l,registerItem:function(e,t){t&&-1===d.findIndex((function(t){return e===t.value}))&&(d.push({value:e,layout:t[l]}),d.sort($))},updateOrder:function(e,t,n){if(!m.current){var r=function(e,t,n,r){if(!r)return e;var i=e.findIndex((function(e){return e.value===t}));if(-1===i)return e;var a=r>0?1:-1,o=e[i+a];if(!o)return e;var l=e[i],c=o.layout,u=(0,L.C)(c.min,c.max,.5);return 1===a&&l.layout.max+n>u||-1===a&&l.layout.min+n<u?(0,z.uo)(e,i,i+a):e}(d,e,t,n);d!==r&&(m.current=!0,c(r.map(Z).filter((function(e){return-1!==u.indexOf(e)}))))}}};return(0,o.useEffect)((function(){m.current=!1})),o.createElement(f,(0,p.pi)({},s,{ref:t}),o.createElement(T.Provider,{value:v},n))}));function Z(e){return e.value}function $(e,t){return e.layout.min-t.layout.min}var U=n(4495),Y=n(26);function K(e){var t=(0,E.h)((function(){return(0,U.B)(e)}));if((0,o.useContext)(Y._).isStatic){var n=(0,p.CR)((0,o.useState)(e),2)[1];(0,o.useEffect)((function(){return t.onChange(n)}),[])}return t}var X=n(6540),q=function(e){return function(e){return"object"==typeof e&&e.mix}(e)?e.mix:void 0};function _(e,t){var n=K(t()),r=function(){return n.set(t())};return r(),function(e,t){(0,o.useEffect)((function(){var n=e.map((function(e){return e.onChange(t)}));return function(){return n.forEach((function(e){return e()}))}}))}(e,(function(){return g.ZP.update(r,!1,!0)})),n}function W(e,t,n,r){var i="function"==typeof t?t:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=!Array.isArray(e[0]),r=n?0:-1,i=e[0+r],a=e[1+r],o=e[2+r],l=e[3+r],c=(0,X.s)(a,o,(0,p.pi)({mixer:q(o[0])},l));return n?c(i):c}(t,n,r);return Array.isArray(e)?H(e,i):H([e],(function(e){var t=(0,p.CR)(e,1)[0];return i(t)}))}function H(e,t){var n=(0,E.h)((function(){return[]}));return _(e,(function(){n.length=0;for(var r=e.length,i=0;i<r;i++)n[i]=e[i].get();return t(n)}))}var V=n(2569);function J(e,t){return void 0===t&&(t=0),(0,V.i)(e)?e:K(t)}var Q={Group:G,Item:(0,o.forwardRef)((function(e,t){var n=e.children,r=e.style,i=e.value,a=e.as,l=void 0===a?"li":a,c=e.onDrag,u=e.layout,s=void 0===u||u,f=(0,p._T)(e,["children","style","value","as","onDrag","layout"]),d=(0,E.h)((function(){return(0,N.E)(l)})),m=(0,o.useContext)(T),v={x:J(null==r?void 0:r.x),y:J(null==r?void 0:r.y)},g=W([v.x,v.y],(function(e){var t=(0,p.CR)(e,2),n=t[0],r=t[1];return n||r?1:"unset"})),b=(0,o.useRef)(null);(0,D.k)(Boolean(m),"Reorder.Item must be a child of Reorder.Group");var h=m,y=h.axis,x=h.registerItem,w=h.updateOrder;return(0,o.useEffect)((function(){x(i,b.current)}),[m]),o.createElement(d,(0,p.pi)({drag:y},f,{dragSnapToOrigin:!0,style:(0,p.pi)((0,p.pi)({},r),{x:v.x,y:v.y,zIndex:g}),layout:s,onDrag:function(e,t){var n=t.velocity;n[y]&&w(i,v[y].get(),n[y]),null==c||c(e,t)},onLayoutMeasure:function(e){b.current=e},ref:t}),n)}))},ee=n(4650);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){(0,ee.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],ie=["B","kiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],ae=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],oe=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],le=function(e,t,n){var r=e;return"string"==typeof t||Array.isArray(t)?r=e.toLocaleString(t,n):!0!==t&&void 0===n||(r=e.toLocaleString(void 0,n)),r};function ce(e,t){if(!Number.isFinite(e))throw new TypeError("Expected a finite number, got ".concat(typeof e,": ").concat(e));var n=(t=ne({bits:!1,binary:!1},t)).bits?t.binary?oe:ae:t.binary?ie:re;if(t.signed&&0===e)return" 0 ".concat(n[0]);var r,i=e<0,a=i?"-":t.signed?"+":"";if(i&&(e=-e),void 0!==t.minimumFractionDigits&&(r={minimumFractionDigits:t.minimumFractionDigits}),void 0!==t.maximumFractionDigits&&(r=ne({maximumFractionDigits:t.maximumFractionDigits},r)),e<1)return a+le(e,t.locale,r)+" "+n[0];var o=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),n.length-1);return e/=Math.pow(t.binary?1024:1e3,o),r||(e=e.toPrecision(3)),a+le(Number(e),t.locale,r)+" "+n[o]}function ue(e){var t="bg-base-100 shadow-md flex flex-row justify-between p-2 gap-4 rounded-lg cursor-pointer overflow-hidden hover:bg-base-200 "+(e.disabled?"opacity-40":""),n=Object.assign({initial:{scale:0},animate:{scale:1},exit:{scale:0}},c.b$);return o.createElement(Q.Item,Object.assign({key:e.id,value:e.id,className:t},n),o.createElement("div",{className:"flex flex-row items-center overflow-hidden gap-0 sm:gap-2"},o.createElement(P.hU,{icon:f.g$q}),o.createElement("p",{className:"font-bold overflow-hidden whitespace-nowrap text-ellipsis"},e.name)),o.createElement("div",{className:"flex flex-row flex-none items-center overflow-hidden gap-0 sm:gap-2"},o.createElement("p",{className:"whitespace-nowrap"},"(",ce(e.size,{maximumFractionDigits:0}),")"),o.createElement("div",{className:"card-actions justify-end"},o.createElement(P.hU,{icon:f.g82,onClick:function(){return e.onRemove(e.id)}}))))}function se(e){return o.createElement(Q.Group,{axis:"y",values:e.fileIds,onReorder:e.onReorder,className:"flex flex-col px-6 py-7 gap-5 bg-base-300 shadow-inner overflow-hidden"},o.createElement(O,null,e.fileIds.map((function(t){return o.createElement(ue,{key:t,id:t,name:e.files[t].getName,size:e.files[t].getSize,onRemove:e.onFileRemoved,disabled:e.disabled})}))))}function fe(e){return o.createElement("div",{tabIndex:0,className:"collapse"},o.createElement("div",{className:"flex flex-col sm:flex-row justify-between items-center p-6 sm:pl-10 gap-4 collapse-title text-lg font-medium"},o.createElement("h2",null,e.fileIds.length," file",1!==e.fileIds.length&&"s"," added (",ce(Object.values(e.files).reduce((function(e,t){return e+t.getSize}),0)),")"),o.createElement("div",{className:"flex flex-row gap-2 flex-1 sm:flex-none"},o.createElement(d,{onFilesAdded:e.onFileAdded},o.createElement(P.KM,{icon:f.b7h,fake:!0},"Add File")),o.createElement(P.KM,{icon:f.$aW,onClick:e.onAllFilesRemoved},"Remove All"))),o.createElement("div",{style:{pointerEvents:e.disabled?"none":"initial"},onClick:e.disabled&&c.$K||void 0,className:"overflow-hidden"},o.createElement(se,{fileIds:e.fileIds,files:e.files,onReorder:e.onReorder,onFileRemoved:e.onFileRemoved,disabled:e.disabled})))}function de(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return me(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ve(){var e=(0,o.useState)([]),t=e[0],n=e[1],i=(0,o.useState)({}),s=i[0],f=i[1],d=(0,o.useState)([]),p=d[0],g=d[1],b=(0,o.useState)(""),h=b[0],y=b[1],E=(0,o.useState)(0),x=E[0],w=E[1],R=(0,c.Zq)(l.Z),k=new c.Rq(R.shortTitle,R.siteUrl);function C(e,t){void 0===t&&(t=null),k.removeMergedFile(h),t&&f(t),n(e),w(0),y("")}var A=(0,o.useCallback)((function(e){var n=k.filterInvalidFiles(s,Array.from(e)),r=n[0],i=n[1];if(r.length>0){for(var a,o=s,l=[],c=de(r);!(a=c()).done;){var u=a.value;l.push(u.id),o[u.id]=u}C(t.concat(l),o)}i.length>0&&g(i)}),[t,s]);function F(){return(F=(0,r.Z)(a().mark((function e(){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.createMergedFile(s,t,w);case 2:n=e.sent,r=n[0],i=n[1],""===r&&y(""),y(r),g(i),w(0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o.createElement(u.Xg,{metadata:R},o.createElement(B.Z,{title:R.shortTitle},R.description),o.createElement(u.or,null,o.createElement(v,{onFilesAdded:A}),o.createElement(u.$0,{visible:p.length>0,className:"gap-5"},p.map((function(e){return o.createElement(I,{key:e.getId,statusMsg:e})}))),o.createElement("div",{tabIndex:0,className:"collapse collapse-open flex-1 bg-base-100 border border-base-300 rounded-none sm:rounded-box"},o.createElement(u.$0,{visible:0===t.length,className:"flex-1"},o.createElement(m,{onFilesAdded:A})),o.createElement(u.$0,{visible:t.length>0},o.createElement(fe,{fileIds:t,files:s,onReorder:function(e){C(e)},onFileAdded:A,onFileRemoved:function(e){var n=s,r=t.filter((function(t){return t!==e}));delete n[e],C(r,n)},onAllFilesRemoved:function(){C([],{})},disabled:x>0}))),o.createElement(u.$0,{visible:t.length>0,className:"px-6 sm:px-0"},o.createElement(P.Kk,{numOfFiles:t.length,progress:x,downloadUrl:h,onClick:function(){return F.apply(this,arguments)}}))),o.createElement(j.Z,{author:R.author,githubUrl:R.githubUrl,homepageDomain:R.homepageDomain}))}}}]);
//# sourceMappingURL=component---src-pages-index-tsx-dffc7c5a38b8956e9d56.js.map